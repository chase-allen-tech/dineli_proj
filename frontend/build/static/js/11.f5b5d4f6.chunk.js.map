{"version":3,"sources":["views/Admin/AdminUser.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","redux/actions/user.js","redux/actions/token.js","config/abi.js","services/crypto.js"],"names":["AdminUser","props","dispatch","useDispatch","useState","modalIndex","setModalIndex","users","useSelector","state","user","userData","tokens","token","tokenData","credentials","credential","credentialData","useEffect","actionUserList","actionTokenList","onTransferSubmit","e","a","preventDefault","payload","fromAddress","target","value","toAddress","tokenAddress","tokenAmount","chainId","transferToken","infuraProjectEndpoint","walletPrivateKey","success","Notification","title","message","type","error","className","style","width","bottom","delay","textAlign","to","labelposition","border","borderRadius","Row","fontSize","margin","Col","span","src","alt","height","striped","hover","variant","minWidth","map","key","onClick","cursor","email","walletAddress","role","show","onHide","Header","Title","Body","onSubmit","walletPublicKey","name","hidden","readOnly","step","required","placeholder","Footer","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","length","err","unsupportedIterableToArray","TypeError","localStorage","getItem","JSON","parse","actionUserCreate","callPost","then","response","ACTION_USER_ADD","catch","console","log","count","callGet","result","data","ACTION_USER_LIST","ACTION_USER_LIST_FAIL","actionUserUpdate","actionTokenCreate","ACTION_TOKEN_ADD","ACTION_TOKEN_LIST","ACTION_TOKEN_LIST_FAIL","CONTRACT_ABI","endpoint","privateKey","web3","Web3","providers","HttpProvider","gasLimit","utils","toHex","contract","eth","Contract","toWei","encoded","methods","transfer","encodeABI","tx","accounts","signTransaction","signed","sendSignedTransaction","rawTransaction","receipt"],"mappings":"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","file":"static/js/11.f5b5d4f6.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { Button, Layout, Notification } from \"element-react\"\r\nimport Fade from \"react-reveal/Fade\"\r\nimport { Modal, Table as TableBs } from 'react-bootstrap';\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { actionUserList } from \"../../redux/actions/user\";\r\nimport { actionTokenList } from \"../../redux/actions/token\";\r\n\r\n// import { CONTRACT_ABI } from '../../config/abi';\r\nimport { transferToken } from \"../../services/crypto\";\r\n\r\nconst AdminUser = props => {\r\n\r\n  const dispatch = useDispatch();\r\n  const [modalIndex, setModalIndex] = useState(-1);\r\n\r\n  const users = useSelector(state => state.user.userData);\r\n  const tokens = useSelector(state => state.token.tokenData);\r\n  const credentials = useSelector(state => state.credential.credentialData);\r\n\r\n  useEffect(() => {\r\n    dispatch(actionUserList());\r\n    dispatch(actionTokenList());\r\n  }, []);\r\n\r\n  const successMsg = (msg) => {\r\n    Notification.success({\r\n      title: 'Success',\r\n      message: 'Transaction Success!',\r\n      type: 'success',\r\n    });\r\n  }\r\n\r\n  const errorMsg = () => {\r\n    Notification.error({\r\n      title: 'Failed',\r\n      message: 'Transaction failed. Please try again!',\r\n      type: 'Warning',\r\n    });\r\n  }\r\n\r\n  const onTransferSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setModalIndex(-1);\r\n    const payload = {\r\n      fromAddress: e.target.fromAddress.value,\r\n      toAddress: e.target.toAddress.value,\r\n      tokenAddress: e.target.tokenAddress.value,\r\n      tokenAmount: e.target.tokenAmount.value,\r\n      chainId: 42,\r\n    }\r\n\r\n    let transferResult = await transferToken(credentials[0]?.infuraProjectEndpoint,  credentials[0]?.walletPrivateKey, payload.fromAddress, payload.toAddress, payload.tokenAddress, payload.tokenAmount, payload.chainId);\r\n    if(transferResult.success) {\r\n      successMsg();\r\n    } else {\r\n      errorMsg();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex flex-column justify-content-center align-items-center overflow-hidden\">\r\n      <div style={{ width: '80%' }}>\r\n        <Fade bottom delay={200}>\r\n          <h1 style={{ textAlign: \"center\" }} className='d-font-bold d-text-90 d-white'>Users</h1>\r\n          <div className=\"d-flex\">\r\n            <Link to=\"/admin/users/new\" className=\"ms-auto\">\r\n              <Button type=\"outlined\">New User</Button>\r\n            </Link>\r\n          </div>\r\n          <div className=\"login-ruleForm mt-4\" labelposition={\"top\"} style={{ border: \"2px solid #03ffa4\", borderRadius: \"10px 10px 0 0\" }}>\r\n            <Layout.Row style={{ fontSize: 25, margin: \"-1px 0px 0 0px\" }}>\r\n              <Layout.Col span=\"24\">\r\n                <div className=\"grid-content d-content-highlight d-flex\" style={{ borderRadius: \"10px 10px 1px 1px\" }}>\r\n                  <div className=\"ms-3\">List</div>\r\n                  <div className=\"ms-auto me-3 d-flex align-items-center\">\r\n                    <img src=\"imgs/logo3.png\" alt='logo' style={{ height: \"35px\" }} />\r\n                  </div>\r\n                </div>\r\n              </Layout.Col>\r\n            </Layout.Row>\r\n\r\n            <div className=\"w-100 overflow-auto\">\r\n              <TableBs striped hover variant=\"dark\" style={{ margin: 0 }} className=\"text-center\">\r\n                <thead>\r\n                  <tr>\r\n                    <th className=\"bg-secondary\">#</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Email</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Wallet Address</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Role</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {\r\n                    users.map((user, key) =>\r\n                      <tr key={key} onClick={() => setModalIndex(key)} style={{ cursor: 'pointer' }}>\r\n                        <td>{key + 1}</td>\r\n                        <td>{user.email}</td>\r\n                        <td>{user.walletAddress}</td>\r\n                        <td>{user.role[0]}</td>\r\n                      </tr>\r\n                    )\r\n                  }\r\n                </tbody>\r\n              </TableBs>\r\n            </div>\r\n          </div>\r\n        </Fade>\r\n      </div>\r\n\r\n      <Modal show={modalIndex >= 0} onHide={() => setModalIndex(-1)}>\r\n        <Modal.Header>\r\n          <Modal.Title>Transfer Token</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <form onSubmit={onTransferSubmit}>\r\n            <div className=\"form-group\">\r\n              <div><b>From:</b> {credentials[0]?.walletPublicKey}</div>\r\n              <div><b>To:</b> {users[modalIndex]?.walletAddress}</div>\r\n\r\n              <input name=\"fromAddress\" value={credentials[0]?.walletPublicKey || ''} hidden readOnly />\r\n              <input name=\"toAddress\" value={users[modalIndex]?.walletAddress || ''} hidden readOnly />\r\n            </div>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Token:</label>\r\n              <select className=\"form-select\" name=\"tokenAddress\">\r\n                {\r\n                  tokens?.map((token, key) => <option key={key} value={token.tokenAddress}>{token.tokenAddress}</option>)\r\n                }\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group mt-3\">\r\n              <div className=\"d-flex\">\r\n                <input type=\"number\" className=\"form-control\" step=\"any\" name=\"tokenAmount\" required placeholder=\"Input the amount to transfer\" />\r\n                <button type=\"submit\" className=\"btn btn-secondary ms-2\" >Send</button>\r\n              </div>\r\n            </div>\r\n\r\n          </form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setModalIndex(-1)}>Close</Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AdminUser;","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import {\r\n  ACTION_USER_ADD,\r\n  ACTION_USER_LIST,\r\n  ACTION_USER_LIST_FAIL,\r\n} from '../actionTypes/user'\r\n\r\nimport { callGet, callPost, } from '../../services/axios'\r\nimport { Notification } from 'element-react'\r\n\r\nconst token = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user'))['accessToken'] : null\r\n\r\nexport const actionUserCreate = (tokenData) => (dispatch) => {\r\n  callPost('/api/admin/user', tokenData, token)\r\n    .then((response) => {\r\n      Notification.success({\r\n        title: 'Success',\r\n        message: 'House Properties Submit Success!',\r\n        type: 'success',\r\n      })\r\n      dispatch({\r\n        type: ACTION_USER_ADD,\r\n        payload: tokenData,\r\n      })\r\n    }).catch(err => {\r\n      console.log(err);\r\n      Notification.error({\r\n        title: 'Failed',\r\n        message: 'Please try again.',\r\n        type: 'Warning',\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionUserList = (count) => (dispatch) => {\r\n  return callGet(`/api/user?count=${count}`)\r\n    .then(function (response) {\r\n      let result = response.data\r\n      dispatch({\r\n        type: ACTION_USER_LIST,\r\n        payload: result,\r\n      })\r\n    })\r\n    .catch((error) => {\r\n      dispatch({\r\n        type: ACTION_USER_LIST_FAIL,\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionUserUpdate = (userData) => dispatch => {\r\n  callPost('/api/admin/user/update', userData, token)\r\n    .then((response) => {\r\n      console.log('[res]', response);\r\n      // dispatch({\r\n      //   type: ACTION_ORDER_ADD,\r\n      //   payload: orderData,\r\n      // })\r\n    }).catch(err => {\r\n      console.log(err);\r\n      Notification.error({\r\n        title: 'Failed',\r\n        message: 'Transaction update failed. Please try again.',\r\n        type: 'Warning',\r\n      })\r\n    }\r\n  )\r\n}\r\n","import {\r\n  ACTION_TOKEN_ADD,\r\n  ACTION_TOKEN_LIST,\r\n  ACTION_TOKEN_LIST_FAIL,\r\n  ACTION_TOKEN_GET,\r\n  ACTION_TOKEN_GET_FAIL,\r\n} from '../actionTypes/token'\r\n\r\nimport { callGet, callPost, } from '../../services/axios'\r\nimport { Notification } from 'element-react'\r\n\r\nconst token = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user'))['accessToken'] : null\r\n\r\nexport const actionTokenCreate = (tokenData) => (dispatch) => {\r\n  callPost('/api/admin/token', tokenData, token)\r\n    .then((response) => {\r\n      Notification.success({\r\n        title: 'Success',\r\n        message: 'House Properties Submit Success!',\r\n        type: 'success',\r\n      })\r\n      dispatch({\r\n        type: ACTION_TOKEN_ADD,\r\n        payload: tokenData,\r\n      })\r\n    }).catch(err => {\r\n      console.log(err);\r\n      Notification.error({\r\n        title: 'Failed',\r\n        message: 'Please try again.',\r\n        type: 'Warning',\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionTokenList = (count) => (dispatch) => {\r\n  return callGet(`/api/token?count=${count}`)\r\n    .then(function (response) {\r\n      let result = response.data\r\n      dispatch({\r\n        type: ACTION_TOKEN_LIST,\r\n        payload: result,\r\n      })\r\n    })\r\n    .catch((error) => {\r\n      dispatch({\r\n        type: ACTION_TOKEN_LIST_FAIL,\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionTokenGet = (ID) => (dispatch) => {\r\n  return callGet(`/api/token/id?ID=${ID}`)\r\n    .then(function (response) {\r\n      let result = response.data\r\n      result.monthlyGrossRent = result.yearlyGrossRent / 12\r\n      result.monthlyNetRent = result.yearlyGrossRent / 12 - result.monthlyCosts;\r\n      result.yearlyNetRent = (result.yearlyGrossRent / 12 - result.monthlyCosts) * 12\r\n      result.totalInvestment = result.generatedToken * result.tokenValue\r\n      result.expectedYield = (result.yearlyGrossRent / 12 - result.monthlyCosts) * 12 / (result.generatedToken * result.tokenValue)\r\n      result.imageData = result.imageData.split(',')\r\n\r\n      return dispatch({\r\n        type: ACTION_TOKEN_GET,\r\n        payload: result,\r\n      })\r\n    })\r\n    .catch((error) => {\r\n      return dispatch({\r\n        type: ACTION_TOKEN_GET_FAIL,\r\n      })\r\n    }\r\n  )\r\n}","export const CONTRACT_ABI = [\r\n  {\r\n    \"inputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"constructor\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"spender\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"value\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"Approval\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"from\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"value\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"Transfer\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"spender\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"allowance\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"spender\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"amount\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"approve\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"account\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"balanceOf\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"decimals\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint8\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint8\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"spender\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"subtractedValue\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"decreaseAllowance\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"spender\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"addedValue\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"increaseAllowance\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"name\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"symbol\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"totalSupply\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"recipient\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"amount\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"transfer\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"sender\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"recipient\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"amount\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"transferFrom\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  }\r\n];","import Web3 from 'web3';\r\nimport { CONTRACT_ABI } from '../config/abi';\r\n\r\nexport const tokenInfo = async (endpoint, tokenAddress) => {\r\n  const web3 = new Web3(new Web3.providers.HttpProvider(endpoint));\r\n  const contract = new web3.eth.Contract(CONTRACT_ABI, tokenAddress);\r\n  const tokenName = await contract.methods.symbol().call();\r\n  return tokenName;\r\n}\r\n\r\nfunction financialBalance(numMfil) {\r\n  return Number.parseFloat(numMfil / 1e18).toFixed(18);\r\n}\r\n\r\nexport const balanceAvailable = async (endpoint, fromAddress, tokenAddress, tokenAmount) => {\r\n  const web3 = new Web3(new Web3.providers.HttpProvider(endpoint));\r\n  let contract = new web3.eth.Contract(CONTRACT_ABI, tokenAddress);\r\n  let balance = await contract.methods.balanceOf(fromAddress).call();\r\n  console.log('[balance]', financialBalance(balance), tokenAmount)\r\n  if(financialBalance(balance) < parseFloat(tokenAmount)) {\r\n    return false;\r\n  } \r\n  return true;\r\n}\r\n\r\nexport const transferToken = async (endpoint, privateKey, fromAddress, toAddress, tokenAddress, tokenAmount, chainId) => {\r\n  const web3 = new Web3(new Web3.providers.HttpProvider(endpoint));\r\n  const gasLimit = web3.utils.toHex(6200000);\r\n\r\n  try {\r\n\r\n    let contract = new web3.eth.Contract(CONTRACT_ABI, tokenAddress);\r\n\r\n    // # of transactions in my account\r\n    // let count = await web3.eth.getTransactionCount(fromAddress);\r\n    // console.log('Number of transactions so far in my account: ', count);\r\n\r\n    // My balance\r\n    // let balance = await contract.methods.balanceOf(fromAddress).call();\r\n    // console.log('Balance before send: ', financialBalance(balance));\r\n    \r\n    // if(balance < tokenAmount) return { success: false };\r\n    tokenAmount = web3.utils.toWei(tokenAmount, 'ether')\r\n\r\n    let encoded = contract.methods.transfer(toAddress, tokenAmount).encodeABI();\r\n    let tx = {\r\n      gasLimit: gasLimit,\r\n      to: tokenAddress,\r\n      data: encoded,\r\n      chainId: chainId\r\n    };\r\n\r\n    let signed = await web3.eth.accounts.signTransaction(tx, privateKey);\r\n    let receipt = await web3.eth.sendSignedTransaction(signed.rawTransaction);\r\n\r\n    console.log('[transfer result]', receipt);\r\n    return { success: true, data: receipt};\r\n  } catch (err) {\r\n    console.log('[err]', err);\r\n    return { success: false };\r\n  }\r\n}"],"sourceRoot":""}