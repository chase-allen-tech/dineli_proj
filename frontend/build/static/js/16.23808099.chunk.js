(this.webpackJsonpdineli=this.webpackJsonpdineli||[]).push([[16],{1090:function(e,t,n){"use strict";n.r(t);var r=n(18),c=n(480),o=n(112),a=n(1),i=n(107),s=n(12),l=n(67),d=n(434),u=(n(782),n(109)),b=n(421),j=n(481),f=n(525),h=n(9),m=["","basic","gold","premium"];t.default=function(e){var t=Object(a.useState)(!0),n=Object(o.a)(t,2),p=n[0],y=n[1],g=Object(s.g)(),O=Object(s.h)().productID,x=Object(u.c)(),v=Object(u.d)((function(e){return e.property.currentHouse})),N=Object(u.d)((function(e){return e.auth.user})),k=Object(u.d)((function(e){return e.order.userOrder})),S=Object(a.useState)([]),w=Object(o.a)(S,2),I=w[0],T=w[1],P=Object(a.useState)({}),R=Object(o.a)(P,2),C=R[0],F=R[1];Object(a.useEffect)((function(){localStorage.getItem("user")||(localStorage.removeItem("cartProducts"),g.goBack()),window.scrollTo(0,0)}),[]),Object(a.useEffect)((function(){x(Object(b.b)(O)),x(Object(j.d)(N.id))}),[O]),Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("cartProducts"));if(e=e&&e.length?e:[],"null"===O)T(e);else{if(!v||0===Object.keys(v).length)return;e.find((function(e){return e.id===v.id}))||e.push(v),T(e),e.length>0&&localStorage.setItem("cartProducts",JSON.stringify(e))}console.log(e);var t,n={},r=Object(c.a)(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o.id.toString()]=o.tokenQuantity?Number(o.tokenQuantity):0}}catch(a){r.e(a)}finally{r.f()}F(n)}),[v]);return Object(h.jsxs)("div",{style:{margin:"3% 12%",border:"none"},children:[Object(h.jsx)(i.Layout.Row,{children:Object(h.jsx)(i.Layout.Col,{span:"24",children:Object(h.jsx)("div",{className:"grid-content",children:Object(h.jsx)("div",{className:"block",children:Object(h.jsx)("span",{className:"wrapper",children:Object(h.jsx)(l.b,{to:"/marketplace",children:Object(h.jsx)(i.Button,{type:"success",className:"d-font-bold d-text-28",style:{background:"#03ffa4",color:"black",borderRadius:10},children:"CONTINUE SHOPPING"})})})})})})}),Object(h.jsxs)(d.a,{striped:!0,hover:!0,variant:"dark",style:{margin:0},className:"text-center mt-4",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{className:"bg-secondary"}),Object(h.jsx)("th",{className:"bg-secondary",children:"Asset"}),Object(h.jsx)("th",{className:"bg-secondary",style:{minWidth:100},children:"Asset Price"}),Object(h.jsx)("th",{className:"bg-secondary",style:{minWidth:100},children:"Total Fees"}),Object(h.jsx)("th",{className:"bg-secondary",style:{minWidth:100},children:"Purchase Price"}),Object(h.jsx)("th",{className:"bg-secondary",style:{minWidth:200},children:"Quantity"}),Object(h.jsx)("th",{className:"bg-secondary",style:{minWidth:110},children:"Subtotal"})]})}),Object(h.jsx)("tbody",{children:I.map((function(e,t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:Object(h.jsx)("div",{onClick:function(){return function(e){console.log("[enter]",e);var t=JSON.parse(localStorage.getItem("cartProducts")),n=t.findIndex((function(t){return t.id===e}));console.log(t,n),t.splice(n,1),console.log(t),localStorage.setItem("cartProducts",JSON.stringify(t)),T(t);var r=C;delete r[e.toString()],F(r)}(e.id)},children:Object(h.jsx)(i.Icon,{className:"product-cart-delete",name:"circle-cross",style:{color:"white",cursor:"pointer"}})})}),Object(h.jsx)("td",{children:Object(h.jsx)("img",{src:"".concat("https://dineli.com","/public/").concat(e.imageData[0]),alt:"img",width:"100"})}),Object(h.jsxs)("td",{children:["$",null===e||void 0===e?void 0:e.assetPrice]}),Object(h.jsxs)("td",{children:["$",Object(f.a)(null===e||void 0===e?void 0:e.tokenValue,C[e.id.toString()]).toFixed(2)]}),Object(h.jsxs)("td",{children:["$",null===e||void 0===e?void 0:e.tokenValue.toFixed(2)]}),Object(h.jsx)("td",{children:Object(h.jsx)(i.Input,{type:"number",value:C[e.id.toString()],onChange:function(t){return function(e,t){var n=Object.assign({},C);n[e]=t,F(n);var c=Object(r.a)(I),o=c.findIndex((function(t){return t.id===Number(e)}));c[o].tokenQuantity=t,localStorage.setItem("cartProducts",JSON.stringify(c))}(e.id.toString(),t)}})}),Object(h.jsxs)("td",{children:["$",Object(f.b)(null===e||void 0===e?void 0:e.tokenValue,C[e.id.toString()]).toFixed(2)]})]},t)}))})]}),Object(h.jsx)(i.Layout.Row,{children:Object(h.jsx)(i.Layout.Col,{span:"24",style:{marginTop:30,textAlign:"right"},children:Object(h.jsx)("div",{className:"grid-content",children:Object(h.jsx)("div",{className:"block",children:Object(h.jsx)("span",{className:"wrapper"})})})})}),Object(h.jsxs)(i.Layout.Row,{children:[Object(h.jsx)(i.Layout.Col,{md:"14",style:{marginTop:20},children:Object(h.jsx)("div",{className:"grid-content"})}),Object(h.jsx)(i.Layout.Col,{md:"10",style:{marginTop:20},children:Object(h.jsxs)("div",{className:"grid-content",children:[Object(h.jsx)("div",{className:"block",children:Object(h.jsx)("label",{className:"d-font-bold d-text-48 d-white",children:"Cart Totals"})}),Object(h.jsxs)(i.Layout.Row,{style:{marginTop:30},children:[Object(h.jsx)(i.Layout.Col,{span:"12",children:Object(h.jsx)("div",{className:"grid-content d-font-bold d-text-28 d-white",children:"Total"})}),Object(h.jsx)(i.Layout.Col,{span:"12",children:Object(h.jsxs)("div",{className:"grid-content d-font-bold d-text-28 d-white",style:{textAlign:"right"},children:["$",I.reduce((function(e,t){return e+Object(f.b)(null===t||void 0===t?void 0:t.tokenValue,C[t.id.toString()])}),0)]})})]}),Object(h.jsx)("div",{className:"block",style:{marginTop:30},children:Object(h.jsx)("span",{className:"wrapper",children:Object(h.jsx)(i.Button,{type:"success",className:"d-font-bold d-text-28",style:{width:"100%",background:"#03ffa4",color:"black",borderRadius:10},onClick:function(){var e=0,t=m[N.type||0];if(I.length&&t)for(var n=0;n<I.length;n++){if(e=0,k.length>0)for(var r=0;r<k.length;r++)I[n].tokenAddress===k[r].details[0].tokenAddress&&(e+=Number(k[r].details[0].tokenQuantity));if(e+Number(C[I[n].id])>I[n][t])return void i.Notification.error({title:"Proceed to checkout failed",message:"You can buy up to ".concat(I[n][t]," ").concat(I[n].tokenSymbol," Token"),type:"Warning"})}g.push("/checkout")},children:"PROCEED TO CHECKOUT"})})}),Object(h.jsxs)("div",{style:{border:"1px solid #03ffa4",marginTop:20},children:[Object(h.jsx)("div",{className:"block",style:{textAlign:"center",margin:10},children:Object(h.jsx)("label",{className:"d-font-bold d-text-24 d-white",children:"IS THIS ORDER A GIFT?"})}),Object(h.jsx)("div",{className:"block",style:{textAlign:"center"},children:Object(h.jsx)("label",{onClick:function(){y(!p)},className:"d-font-bold d-text-24 d-white",style:{textDecoration:"underline"},children:"Learn More "})}),p&&Object(h.jsxs)("div",{className:"block",style:{textAlign:"justify",margin:20},children:[Object(h.jsx)("p",{className:"d-font-book d-text-20 d-white",children:"To make your order a gift, just check 'This order is a gift' at checkout, then enter the recipient's name, email, and your preferred delivery date. We'll email you a printable certificate to give in person, and we'll email that certificate to the gift recipient on the delivery date, too. "}),Object(h.jsx)("p",{className:"d-font-book d-text-20 d-white",children:"The recipient can follow a simple link or QR code to register and complete ID verification, including registering an Ethereum wallet. When they're done, we'll dispense their gift tokens!"}),Object(h.jsxs)("p",{className:"d-font-book d-text-20 d-white",children:[Object(h.jsx)("strong",{children:"Note:"})," Tokens may not yet be gifted to minors."]}),Object(h.jsxs)("p",{className:"d-font-book d-text-20 d-white",children:[Object(h.jsx)("strong",{children:"Important: "}),"Gift recipients who are U.S. citizens or residents must be verified as Accredited Investors before we can dispense their gifts."]})]})]})]})})]})]})}},421:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n(35),c=n(420),o=n(107),a=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,i=function(e){return function(t){Object(c.d)("/api/admin/property",e,a).then((function(n){o.Notification.success({title:"Success",message:"House Properties Submit Success!",type:"success"}),t({type:r.a,payload:e})})).catch((function(e){console.log(e),o.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},s=function(e){return function(t){Object(c.d)("/api/admin/property/update",e,a).then((function(n){o.Notification.success({title:"Success",message:"House Properties Update Success!",type:"success"}),t({type:r.f,payload:e})})).catch((function(e){console.log(e),o.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},l=function(e){return function(t){return Object(c.c)("/api/property?count=".concat(e)).then((function(e){for(var n=e.data,c=0;c<n.length;c++)n[c].monthlyNetRent=n[c].monthlyGrossRent-n[c].monthlyCosts,n[c].yearlyNetRent=12*(n[c].monthlyGrossRent-n[c].monthlyCosts),n[c].totalInvestment=n[c].generatedToken*n[c].tokenValue,n[c].expectedYield=12*(n[c].monthlyGrossRent-n[c].monthlyCosts)/(n[c].generatedToken*n[c].tokenValue),n[c].imageData=n[c].imageData.split(",");t({type:r.d,payload:n})})).catch((function(e){t({type:r.e})}))}},d=function(e){return function(t){return Object(c.c)("/api/property/id?ID=".concat(e)).then((function(e){var n=e.data;return n.monthlyGrossRent=n.monthlyGrossRent,n.monthlyNetRent=n.monthlyGrossRent-n.monthlyCosts,n.yearlyNetRent=12*(n.monthlyGrossRent-n.monthlyCosts),n.totalInvestment=n.generatedToken*n.tokenValue,n.expectedYield=12*(n.monthlyGrossRent-n.monthlyCosts)/parseFloat(n.generatedToken*n.tokenValue),n.imageData=n.imageData.split(","),t({type:r.b,payload:n})})).catch((function(e){return t({type:r.c})}))}}},434:function(e,t,n){"use strict";var r=n(10),c=n(14),o=n(66),a=n.n(o),i=n(1),s=n.n(i),l=n(108),d=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=s.a.forwardRef((function(e,t){var n=e.bsPrefix,o=e.className,i=e.striped,u=e.bordered,b=e.borderless,j=e.hover,f=e.size,h=e.variant,m=e.responsive,p=Object(c.a)(e,d),y=Object(l.a)(n,"table"),g=a()(o,y,h&&y+"-"+h,f&&y+"-"+f,i&&y+"-striped",u&&y+"-bordered",b&&y+"-borderless",j&&y+"-hover"),O=s.a.createElement("table",Object(r.a)({},p,{className:g,ref:t}));if(m){var x=y+"-responsive";return"string"===typeof m&&(x=x+"-"+m),s.a.createElement("div",{className:x},O)}return O}));t.a=u},480:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(68);function c(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var c=0,o=function(){};return{s:o,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}},481:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return u}));var r=n(7),c=n(42),o=n(420),a=n(107),i=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,s=function(e){return function(t){Object(o.d)("/api/admin/order",e,i).then((function(n){a.Notification.success({title:"Success",message:"Order Submit Success!",type:"success"}),t({type:c.a,payload:e}),localStorage.removeItem("cartProducts")})).catch((function(e){console.log(e),a.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},l=function(e){return function(t){return Object(o.c)("/api/order?count=".concat(e)).then((function(e){var n=e.data;t({type:c.d,payload:n})})).catch((function(e){t({type:c.e})}))}},d=function(e){return function(t){return Object(o.c)("/api/order/uid?ID=".concat(e)).then((function(e){var n=e.data;return n=n.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{details:JSON.parse(e.details)})})),t({type:c.f,payload:n})})).catch((function(e){return t({type:c.c})}))}},u=function(e){return function(t){Object(o.d)("/api/admin/order/update",e,i).then((function(e){})).catch((function(e){console.log(e),a.Notification.error({title:"Failed",message:"Transaction update failed. Please try again.",type:"Warning"})}))}}},525:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var r=function(e,t){return parseFloat(e)*parseFloat(t)*.1},c=function(e,t){return parseFloat(e)*parseFloat(t)*1.1}},782:function(e,t,n){}}]);
//# sourceMappingURL=16.23808099.chunk.js.map