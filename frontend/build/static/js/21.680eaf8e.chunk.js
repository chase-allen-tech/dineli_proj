(this.webpackJsonpdineli=this.webpackJsonpdineli||[]).push([[21],{1088:function(e,t,n){"use strict";n.r(t);var s=n(111),a=n(435),r=n.n(a),i=n(461),o=n(480),c=n(62),l=n(63),d=n(114),u=n(65),h=n(64),p=n(1),b=n.n(p),m=n(107),j=n(110),g=n.n(j),y=n(434),f=n(783),x=n(109),O=n(421),v=n(481),C=n(792),N=n.n(C),S=n(420),I=n(793),k=n.n(I),R=n(525),P=n(9),w={actionPropertyGet:O.b,actionOrderCreate:v.a},A=Object(x.b)((function(e){return{credentialData:e.credential.credentialData}}),w)(function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={form:{firstname:"",lastname:"",email:"",phone:"",country:"",street:"",city:"",postCode:"",isGift:"",description:"",payCard:"1",cardNumber:"",expiration:"",securityCode:"",isAgree:"",walletAddress:""},rules:{firstname:[{required:!0,message:"Please input first name",trigger:"blur"}],lastname:[{required:!0,message:"Please input last name",trigger:"blur"}],email:[{required:!0,message:"Please input email",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:"blur,change"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],country:[{required:!0,message:"Please input country",trigger:"blur"}],street:[{required:!0,message:"Please input street",trigger:"blur"}],city:[{required:!0,message:"Please input Town/City",trigger:"change"}],isAgree:[{required:!0,message:"This field is required",trigger:"change"}]},countryList:[],productItems:[],totalPrice:0,coinbaseId:null,hellosignId:null},s.coinbaseRef=b.a.createRef(),s.onPaypalSuccess.bind(Object(d.a)(s)),s.onSaveOrder.bind(Object(d.a)(s)),s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t=this,n=JSON.parse(localStorage.getItem("user"));n&&n.walletAddress||m.Notification.error({title:"Wallet Required",message:"Please check wallet in account page!",type:"Warning"});var s=JSON.parse(localStorage.getItem("cartProducts"));if(s&&s.length){var a,c=[],l=0,d=Object(o.a)(s);try{for(d.s();!(a=d.n()).done;){var u=a.value;c.push({identifier:u.address1,subtotal:Object(R.b)(u.tokenValue,Number(u.tokenQuantity)).toFixed(2)}),l+=Object(R.b)(u.tokenValue,Number(u.tokenQuantity))}}catch(p){d.e(p)}finally{d.f()}this.setState({productItems:c,totalPrice:l});var h={name:"Token Purchase - "+new Date,description:"Token purchase with coinbase",local_price:{amount:l,currency:"USD"},pricing_type:"fixed_price",requested_info:["email"]};fetch("https://api.commerce.coinbase.com/checkouts",{method:"POST",headers:{"Content-Type":"application/json","X-CC-Api-Key":null===(e=this.props.credentialData[0])||void 0===e?void 0:e.coinbaseApiKey,"X-CC-Version":"2018-03-22"},body:JSON.stringify(h)}).then(function(){var e=Object(i.a)(r.a.mark((function e(n){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:s=e.sent,console.log("[cionbase data]",s),t.setState({coinbaseId:s.data.id});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("[coinbase error]",e)})),fetch("https://restcountries.eu/rest/v2/").then(function(){var e=Object(i.a)(r.a.mark((function e(n){var s,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:s=e.sent,a=s.map((function(e){return e.name})),t.setState({countryList:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("[country err]",e)}))}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.refs.form.validate((function(e){"1"===t.state.form.payCard&&t.coinbaseRef.handleButtonClick()}))}},{key:"handleReset",value:function(e){e.preventDefault(),this.refs.form.resetFields()}},{key:"onChange",value:function(e,t){this.setState({form:Object.assign({},this.state.form,Object(s.a)({},e,t))})}},{key:"onChangePaycard",value:function(e){this.setState({form:Object.assign({},this.state.form,{payCard:e})})}},{key:"onPaypalSuccess",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.Notification.success({title:"Payment Success by "+t.payer.name.given_name,message:"Order id: "+n.orderID,type:"success",duration:5e3}),this.onSaveOrder("paypal");case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onCryptoSuccess",value:function(){m.Notification.success({title:"Payment Success",message:"Crypto payment success",type:"success",duration:5e3}),this.onSaveOrder("coinbase")}},{key:"onSaveOrder",value:function(e){console.log("[saving order...]");var t=JSON.parse(localStorage.getItem("user"));console.log(t,t.walletAddress);var n,s=JSON.parse(localStorage.getItem("cartProducts")),a=0,r=[],i=Object(o.a)(s);try{for(i.s();!(n=i.n()).done;){var c=n.value;a+=parseFloat(c.tokenQuantity),r.push({tokenAddress:c.tokenAddress,tokenQuantity:c.tokenQuantity,toAddress:t.walletAddress})}}catch(d){i.e(d)}finally{i.f()}var l={userId:t.id,status:"pending",totalPrice:this.state.totalPrice,count:a,paymentMethod:e,details:JSON.stringify(r),signatureId:this.state.hellosignId};this.props.actionOrderCreate(l),localStorage.removeItem("cartProducts"),this.props.history.push("/marketplace")}},{key:"onHelloSign",value:function(){var e=Object(i.a)(r.a.mark((function e(){var t,n,s,a=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new k.a({clientId:null===(t=this.props.credentialData[0])||void 0===t?void 0:t.hellosignClientId}),(s=JSON.parse(localStorage.getItem("user")))&&s.walletAddress){e.next=5;break}return m.Notification.error({title:"Wallet Required",message:"Please add wallet in account page",type:"Warning"}),e.abrupt("return");case 5:Object(S.b)("/api/hellosign",{email:s.email,name:s.username,order:1}).then((function(e){console.log("[res]",e),e.data.success&&(n.open(e.data.signUrl),n.once("sign",(function(e){console.log("[signed]",e.signatureId),a.setState({hellosignId:e.signatureId})})))})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return Object(P.jsx)("div",{style:{margin:"4% 12% 4% 12%"},children:Object(P.jsx)(g.a,{bottom:!0,delay:200,children:Object(P.jsx)(m.Form,{ref:"form",model:this.state.form,rules:this.state.rules,labelWidth:"100",labelPosition:"top",children:Object(P.jsxs)(m.Layout.Row,{children:[Object(P.jsx)(m.Layout.Col,{sm:"24",md:12,children:Object(P.jsx)("div",{className:"grid-content",children:Object(P.jsxs)("div",{className:"register-ruleForm d-font-bold",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:[Object(P.jsx)(m.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 15px 0px"},children:Object(P.jsx)(m.Layout.Col,{span:"24",children:Object(P.jsx)("div",{className:"grid-content d-content-highlight",style:{borderRadius:"10px 10px 1px 1px"},children:Object(P.jsx)("div",{className:"d-font-bold d-black",style:{display:"inline",marginLeft:10},children:"Billing Details"})})})}),Object(P.jsxs)(m.Layout.Row,{children:[Object(P.jsx)(m.Layout.Col,{span:"12",children:Object(P.jsx)("div",{className:"grid-content bg-purple",children:Object(P.jsx)(m.Form.Item,{label:"FIRST NAME",prop:"firstname",style:{margin:15},children:Object(P.jsx)(m.Input,{value:this.state.form.firstname,onChange:this.onChange.bind(this,"firstname")})})})}),Object(P.jsx)(m.Layout.Col,{span:"12",children:Object(P.jsx)("div",{className:"grid-content bg-purple-light",children:Object(P.jsx)(m.Form.Item,{label:"LAST NAME",prop:"lastname",style:{margin:15},children:Object(P.jsx)(m.Input,{value:this.state.form.lastname,onChange:this.onChange.bind(this,"lastname")})})})})]}),Object(P.jsx)(m.Form.Item,{label:"EMAIL ADDRESS",prop:"email",style:{margin:15},children:Object(P.jsx)(m.Input,{value:this.state.form.email,onChange:this.onChange.bind(this,"email")})}),Object(P.jsx)(m.Form.Item,{label:"PHONE",prop:"phone",style:{margin:15},children:Object(P.jsx)(m.Input,{value:this.state.form.phone,onChange:this.onChange.bind(this,"phone")})}),Object(P.jsx)(m.Form.Item,{label:"Country",prop:"country",style:{margin:15},children:Object(P.jsx)(m.Select,{value:this.state.form.country,placeholder:"country name",onChange:this.onChange.bind(this,"country"),style:{width:"100%"},children:this.state.countryList.map((function(e,t){return Object(P.jsx)(m.Select.Option,{label:e,value:e},t)}))})}),Object(P.jsx)(m.Form.Item,{label:"STREET ADDRESS",prop:"street",style:{margin:15},children:Object(P.jsx)(m.Input,{value:this.state.form.street,onChange:this.onChange.bind(this,"street")})}),Object(P.jsx)(m.Form.Item,{label:"TOWN/CITY",prop:"city",style:{margin:15},children:Object(P.jsx)(m.Input,{value:this.state.form.city,onChange:this.onChange.bind(this,"city")})}),Object(P.jsx)(m.Form.Item,{label:"POST CODE/ZIP",prop:"postCode",style:{margin:15},children:Object(P.jsx)(m.Input,{value:this.state.form.postCode,onChange:this.onChange.bind(this,"postCode")})})]})})}),Object(P.jsxs)(m.Layout.Col,{sm:"24",md:12,children:[Object(P.jsx)("div",{className:"grid-content",children:Object(P.jsx)("div",{className:"register-ruleForm d-font-bold",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:Object(P.jsxs)(m.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 15px 0px"},children:[Object(P.jsx)(m.Layout.Col,{span:"24",children:Object(P.jsx)("div",{className:"grid-content d-content-highlight",style:{borderRadius:"10px 10px 1px 1px"},children:Object(P.jsx)("div",{className:"d-font-bold d-black",style:{display:"inline",marginLeft:10},children:"Additional Information"})})}),Object(P.jsx)(m.Layout.Col,{span:"24",children:Object(P.jsx)("div",{className:"grid-content",style:{borderRadius:"10px 10px 1px 1px",marginLeft:20,marginTop:20},children:Object(P.jsx)("div",{children:Object(P.jsx)(m.Checkbox.Group,{value:this.state.form.isGift,onChange:this.onChange.bind(this,"isGift"),children:Object(P.jsx)(m.Checkbox,{label:" \xa0 THIS ORDER IS A GIFT",name:"isGift"})})})})}),Object(P.jsx)(m.Layout.Col,{span:"24",children:Object(P.jsx)("div",{className:"grid-content",style:{borderRadius:"10px 10px 1px 1px"},children:Object(P.jsx)("div",{className:"d-font-bold d-white d-text-14",style:{display:"inline",marginLeft:20},children:"ORDER NOTES (OPTIONAL)"})})}),Object(P.jsx)(m.Layout.Col,{span:"24",children:Object(P.jsx)("div",{className:"grid-content",style:{borderRadius:"10px 10px 1px 1px"},children:Object(P.jsx)(m.Input,{type:"textarea",value:this.state.form.description,onChange:this.onChange.bind(this,"description"),style:{width:"95%",margin:"0px 20px 0px 20px"}})})})]})})}),Object(P.jsx)("div",{style:{padding:20},children:Object(P.jsx)(m.Button,{onClick:this.onHelloSign.bind(this),type:"success",className:"d-font-bold d-text-28 w-100",style:{background:"#03ffa4",color:"black",borderRadius:10},children:"Hello Sign"})})]}),Object(P.jsx)(m.Layout.Col,{span:24,children:Object(P.jsx)("div",{className:"grid-content",children:Object(P.jsx)("div",{className:"register-ruleForm d-font-bold",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:Object(P.jsxs)(m.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 15px 0px"},children:[Object(P.jsx)(m.Layout.Col,{span:"24",children:Object(P.jsx)("div",{className:"grid-content d-content-highlight",style:{borderRadius:"10px 10px 1px 1px"},children:Object(P.jsx)("div",{className:"d-font-bold d-black",style:{display:"inline",marginLeft:10},children:"YOUR ORDER"})})}),Object(P.jsxs)(y.a,{striped:!0,hover:!0,variant:"dark",style:{margin:0,fontSize:15},className:"text-center",children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{className:"bg-secondary",children:"#"}),Object(P.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Product"}),Object(P.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Sub Total"})]})}),Object(P.jsxs)("tbody",{children:[this.state.productItems.map((function(e,t){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:t+1}),Object(P.jsx)("td",{children:e.identifier}),Object(P.jsx)("td",{children:e.subtotal})]},t)})),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:"TOTAL"}),Object(P.jsxs)("td",{children:["$ ",this.state.totalPrice.toFixed(2)]})]})]})]})]})})})}),this.state.hellosignId&&Object(P.jsx)(m.Layout.Col,{span:24,style:{zIndex:100},children:Object(P.jsxs)("div",{className:"grid-content",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:[Object(P.jsxs)("div",{style:{margin:"2%"},children:[Object(P.jsx)(m.Radio,{value:"1",checked:"1"===this.state.form.payCard,onChange:this.onChangePaycard.bind(this),className:"d-font-bold d-white d-text-28",children:"\xa0\xa0PAY WITH CRYPTOCURRENCY"}),Object(P.jsx)("div",{className:"d-font-book d-text-28 d-highlight",children:"Pay with cryptocurrency. If you pay in USDC or DAI, you mush pay only on the ETHEREUM network!"}),Object(P.jsxs)("div",{className:"position-relative",children:[Object(P.jsx)("div",{className:"position-absolute",children:Object(P.jsx)(N.a,{ref:function(e){return t.coinbaseRef=e},checkoutId:this.state.coinbaseId,styled:!1,onChargeSuccess:function(){return alert("success")},onChargeFailure:function(){return console.log("Failure")}})}),Object(P.jsx)("div",{className:"position-absolute w-100",style:{height:50,backgroundColor:"black"}})]})]}),Object(P.jsx)("div",{style:{margin:"2%"},children:Object(P.jsx)(m.Radio,{value:"2",checked:"2"===this.state.form.payCard,onChange:this.onChangePaycard.bind(this),className:"d-font-bold d-white d-text-28",children:"\xa0 \xa0PAY WITH PAYPAL"})}),Object(P.jsxs)("div",{className:"d-font-book d-text-30 d-white",style:{margin:"2%"},children:[Object(P.jsx)("div",{children:"Your proposal data will be used to process your order, support your experience throughout this website, and for other purposes described in our \xa0"}),Object(P.jsx)("button",{type:"button",className:"d-highlight",children:"Privacy Policy"})]}),Object(P.jsx)("div",{className:"d-flex",children:Object(P.jsx)(m.Form.Item,{label:"",prop:"",className:"ms-auto me-4",children:Object(P.jsx)(m.Checkbox,{checked:this.state.form.isAgree,onChange:this.onChange.bind(this,"isAgree"),label:" \xa0 I HAVE READ AND AGREE TO THE WEBSITE TEAMS AND CONDITIONS",name:"isAgree",className:"d-font-bold d-white",style:{fontSize:"2em"}})})}),Object(P.jsx)("div",{className:"block",style:{marginTop:30},children:Object(P.jsxs)("div",{className:"wrapper position-relative",style:{textAlign:"right",margin:"3% 3% 3% 0"},children:[Object(P.jsx)(m.Button,{onClick:this.handleSubmit.bind(this),type:"success",className:"d-font-bold d-text-28 w-50 text-dark",style:{background:"#03ffa4",borderRadius:10},disabled:!this.state.form.isAgree,children:"PLACE ORDER"}),"2"==this.state.form.payCard&&this.state.form.isAgree&&Object(P.jsx)("div",{className:"position-absolute top-0 end-0 w-50 opacity-0",children:Object(P.jsx)(f.PayPalButton,{amount:this.state.totalPrice,onSuccess:function(e,n){t.onPaypalSuccess(e,n)},options:{clientId:null===(e=this.props.credentialData[0])||void 0===e?void 0:e.paypalAppClientId}})})]})})]})})]})})})})}}]),n}(p.Component));t.default=A},421:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d}));var s=n(35),a=n(420),r=n(107),i=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,o=function(e){return function(t){Object(a.d)("/api/admin/property",e,i).then((function(n){r.Notification.success({title:"Success",message:"House Properties Submit Success!",type:"success"}),t({type:s.a,payload:e})})).catch((function(e){console.log(e),r.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},c=function(e){return function(t){Object(a.d)("/api/admin/property/update",e,i).then((function(n){r.Notification.success({title:"Success",message:"House Properties Update Success!",type:"success"}),t({type:s.f,payload:e})})).catch((function(e){console.log(e),r.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},l=function(e){return function(t){return Object(a.c)("/api/property?count=".concat(e)).then((function(e){for(var n=e.data,a=0;a<n.length;a++)n[a].monthlyNetRent=n[a].monthlyGrossRent-n[a].monthlyCosts,n[a].yearlyNetRent=12*(n[a].monthlyGrossRent-n[a].monthlyCosts),n[a].totalInvestment=n[a].generatedToken*n[a].tokenValue,n[a].expectedYield=12*(n[a].monthlyGrossRent-n[a].monthlyCosts)/(n[a].generatedToken*n[a].tokenValue),n[a].imageData=n[a].imageData.split(",");t({type:s.d,payload:n})})).catch((function(e){t({type:s.e})}))}},d=function(e){return function(t){return Object(a.c)("/api/property/id?ID=".concat(e)).then((function(e){var n=e.data;return n.monthlyGrossRent=n.monthlyGrossRent,n.monthlyNetRent=n.monthlyGrossRent-n.monthlyCosts,n.yearlyNetRent=12*(n.monthlyGrossRent-n.monthlyCosts),n.totalInvestment=n.generatedToken*n.tokenValue,n.expectedYield=12*(n.monthlyGrossRent-n.monthlyCosts)/parseFloat(n.generatedToken*n.tokenValue),n.imageData=n.imageData.split(","),t({type:s.b,payload:n})})).catch((function(e){return t({type:s.c})}))}}},481:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return u}));var s=n(7),a=n(42),r=n(420),i=n(107),o=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,c=function(e){return function(t){Object(r.d)("/api/admin/order",e,o).then((function(n){i.Notification.success({title:"Success",message:"Order Submit Success!",type:"success"}),t({type:a.a,payload:e}),localStorage.removeItem("cartProducts")})).catch((function(e){console.log(e),i.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},l=function(e){return function(t){return Object(r.c)("/api/order?count=".concat(e)).then((function(e){var n=e.data;t({type:a.d,payload:n})})).catch((function(e){t({type:a.e})}))}},d=function(e){return function(t){return Object(r.c)("/api/order/uid?ID=".concat(e)).then((function(e){var n=e.data;return n=n.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{details:JSON.parse(e.details)})})),t({type:a.f,payload:n})})).catch((function(e){return t({type:a.c})}))}},u=function(e){return function(t){Object(r.d)("/api/admin/order/update",e,o).then((function(e){})).catch((function(e){console.log(e),i.Notification.error({title:"Failed",message:"Transaction update failed. Please try again.",type:"Warning"})}))}}},525:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var s=function(e,t){return parseFloat(e)*parseFloat(t)*.1},a=function(e,t){return parseFloat(e)*parseFloat(t)*1.1}}}]);
//# sourceMappingURL=21.680eaf8e.chunk.js.map