(this.webpackJsonpdineli=this.webpackJsonpdineli||[]).push([[30],{1087:function(e,t,n){"use strict";n.r(t);var s=n(111),a=n(432),r=n.n(a),i=n(450),o=n(486),c=n(41),l=n(42),d=n(113),u=n(44),h=n(43),p=n(1),b=n(106),m=n(109),j=n.n(m),y=n(437),g=n(1047),f=n(108),x=n(420),O=n(580),v=n(1056),C=n.n(v),S=n(418),I=n(1057),N=n.n(I),k=n(9),R={actionPropertyGet:x.b,actionOrderCreate:O.a},P=Object(f.b)((function(e){return{credentialData:e.credential.credentialData}}),R)(function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).state={form:{firstname:"",lastname:"",email:"",phone:"",country:"",street:"",city:"",postCode:"",isGift:"",description:"",payCard:"1",cardNumber:"",expiration:"",securityCode:"",isAgree:"",walletAddress:""},rules:{firstname:[{required:!0,message:"Please input first name",trigger:"blur"}],lastname:[{required:!0,message:"Please input last name",trigger:"blur"}],email:[{required:!0,message:"Please input email",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:"blur,change"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],country:[{required:!0,message:"Please input country",trigger:"blur"}],street:[{required:!0,message:"Please input street",trigger:"blur"}],city:[{required:!0,message:"Please input Town/City",trigger:"change"}]},countryList:[],productItems:[],totalPrice:0,coinbaseId:null,hellosignId:null},s.onPaypalSuccess.bind(Object(d.a)(s)),s.onSaveOrder.bind(Object(d.a)(s)),s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t=this;window.scrollTo(0,0);var n=JSON.parse(localStorage.getItem("cartProducts"));if(n&&n.length){var s,a=[],c=0,l=Object(o.a)(n);try{for(l.s();!(s=l.n()).done;){var d=s.value;a.push({identifier:d.address1,subtotal:d.tokenValue*Number(d.tokenQuantity)}),c+=Number(d.tokenValue*Number(d.tokenQuantity))}}catch(h){l.e(h)}finally{l.f()}this.setState({productItems:a,totalPrice:c});var u={name:"Token Purchase - "+new Date,description:"Token purchase with coinbase",local_price:{amount:c,currency:"USD"},pricing_type:"fixed_price",requested_info:["email"]};fetch("https://api.commerce.coinbase.com/checkouts",{method:"POST",headers:{"Content-Type":"application/json","X-CC-Api-Key":null===(e=this.props.credentialData[0])||void 0===e?void 0:e.coinbaseApiKey,"X-CC-Version":"2018-03-22"},body:JSON.stringify(u)}).then(function(){var e=Object(i.a)(r.a.mark((function e(n){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:s=e.sent,console.log("[cionbase data]",s),t.setState({coinbaseId:s.data.id});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("[coinbase error]",e)})),fetch("https://restcountries.eu/rest/v2/").then(function(){var e=Object(i.a)(r.a.mark((function e(n){var s,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:s=e.sent,a=s.map((function(e){return e.name})),t.setState({countryList:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("[country err]",e)}))}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.refs.form.validate((function(e){"2"===t.state.form.payCard&&alert("paypal mode")}))}},{key:"handleReset",value:function(e){e.preventDefault(),this.refs.form.resetFields()}},{key:"onChange",value:function(e,t){this.setState({form:Object.assign({},this.state.form,Object(s.a)({},e,t))})}},{key:"onChangePaycard",value:function(e){this.setState({form:Object.assign({},this.state.form,{payCard:e})})}},{key:"onPaypalSuccess",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.Notification.success({title:"Payment Success by "+t.payer.name.given_name,message:"Order id: "+n.orderID,type:"success",duration:5e3}),this.onSaveOrder("paypal");case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onCryptoSuccess",value:function(){b.Notification.success({title:"Payment Success",message:"Crypto payment success",type:"success",duration:5e3}),this.onSaveOrder("coinbase")}},{key:"onSaveOrder",value:function(e){console.log("[saving order...]");var t=JSON.parse(localStorage.getItem("user"));console.log(t,t.walletAddress);var n,s=JSON.parse(localStorage.getItem("cartProducts")),a=0,r=[],i=Object(o.a)(s);try{for(i.s();!(n=i.n()).done;){var c=n.value;a+=parseFloat(c.tokenQuantity),r.push({tokenAddress:c.tokenAddress,tokenQuantity:c.tokenQuantity,toAddress:t.walletAddress})}}catch(d){i.e(d)}finally{i.f()}var l={userId:t.id,status:"pending",totalPrice:this.state.totalPrice,count:a,paymentMethod:e,details:JSON.stringify(r),signatureId:this.state.hellosignId};this.props.actionOrderCreate(l),localStorage.removeItem("cartProducts"),this.props.history.push("/marketplace")}},{key:"onHelloSign",value:function(){var e=Object(i.a)(r.a.mark((function e(){var t,n,s,a=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new N.a({clientId:null===(t=this.props.credentialData[0])||void 0===t?void 0:t.hellosignClientId}),s=JSON.parse(localStorage.getItem("user")),Object(S.b)("/api/hellosign",{email:s.email,name:s.username,order:1}).then((function(e){console.log("[res]",e),e.data.success&&(n.open(e.data.signUrl),n.once("sign",(function(e){console.log("[signed]",e.signatureId),a.setState({hellosignId:e.signatureId})})))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return Object(k.jsx)("div",{style:{margin:"4% 12% 4% 12%"},children:Object(k.jsx)(j.a,{bottom:!0,delay:200,children:Object(k.jsx)(b.Form,{ref:"form",model:this.state.form,rules:this.state.rules,labelWidth:"100",labelPosition:"top",children:Object(k.jsxs)(b.Layout.Row,{children:[Object(k.jsx)(b.Layout.Col,{sm:"24",md:12,children:Object(k.jsx)("div",{className:"grid-content",children:Object(k.jsxs)("div",{className:"register-ruleForm d-font-bold",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:[Object(k.jsx)(b.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 15px 0px"},children:Object(k.jsx)(b.Layout.Col,{span:"24",children:Object(k.jsx)("div",{className:"grid-content d-content-highlight",style:{borderRadius:"10px 10px 1px 1px"},children:Object(k.jsx)("div",{className:"d-font-bold d-black",style:{display:"inline",marginLeft:10},children:"Billing Details"})})})}),Object(k.jsxs)(b.Layout.Row,{children:[Object(k.jsx)(b.Layout.Col,{span:"12",children:Object(k.jsx)("div",{className:"grid-content bg-purple",children:Object(k.jsx)(b.Form.Item,{label:"FIRST NAME",prop:"firstname",style:{margin:15},children:Object(k.jsx)(b.Input,{value:this.state.form.firstname,onChange:this.onChange.bind(this,"firstname")})})})}),Object(k.jsx)(b.Layout.Col,{span:"12",children:Object(k.jsx)("div",{className:"grid-content bg-purple-light",children:Object(k.jsx)(b.Form.Item,{label:"LAST NAME",prop:"lastname",style:{margin:15},children:Object(k.jsx)(b.Input,{value:this.state.form.lastname,onChange:this.onChange.bind(this,"lastname")})})})})]}),Object(k.jsx)(b.Form.Item,{label:"EMAIL ADDRESS",prop:"email",style:{margin:15},children:Object(k.jsx)(b.Input,{value:this.state.form.email,onChange:this.onChange.bind(this,"email")})}),Object(k.jsx)(b.Form.Item,{label:"PHONE",prop:"phone",style:{margin:15},children:Object(k.jsx)(b.Input,{value:this.state.form.phone,onChange:this.onChange.bind(this,"phone")})}),Object(k.jsx)(b.Form.Item,{label:"Country",prop:"country",style:{margin:15},children:Object(k.jsx)(b.Select,{value:this.state.form.country,placeholder:"country name",onChange:this.onChange.bind(this,"country"),style:{width:"100%"},children:this.state.countryList.map((function(e,t){return Object(k.jsx)(b.Select.Option,{label:e,value:e},t)}))})}),Object(k.jsx)(b.Form.Item,{label:"STREET ADDRESS",prop:"street",style:{margin:15},children:Object(k.jsx)(b.Input,{value:this.state.form.street,onChange:this.onChange.bind(this,"street")})}),Object(k.jsx)(b.Form.Item,{label:"TOWN/CITY",prop:"city",style:{margin:15},children:Object(k.jsx)(b.Input,{value:this.state.form.city,onChange:this.onChange.bind(this,"city")})}),Object(k.jsx)(b.Form.Item,{label:"POST CODE/ZIP",prop:"postCode",style:{margin:15},children:Object(k.jsx)(b.Input,{value:this.state.form.postCode,onChange:this.onChange.bind(this,"postCode")})})]})})}),Object(k.jsxs)(b.Layout.Col,{sm:"24",md:12,children:[Object(k.jsx)("div",{className:"grid-content",children:Object(k.jsx)("div",{className:"register-ruleForm d-font-bold",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:Object(k.jsxs)(b.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 15px 0px"},children:[Object(k.jsx)(b.Layout.Col,{span:"24",children:Object(k.jsx)("div",{className:"grid-content d-content-highlight",style:{borderRadius:"10px 10px 1px 1px"},children:Object(k.jsx)("div",{className:"d-font-bold d-black",style:{display:"inline",marginLeft:10},children:"Additional Information"})})}),Object(k.jsx)(b.Layout.Col,{span:"24",children:Object(k.jsx)("div",{className:"grid-content",style:{borderRadius:"10px 10px 1px 1px",marginLeft:20,marginTop:20},children:Object(k.jsx)("div",{children:Object(k.jsx)(b.Checkbox.Group,{value:this.state.form.isGift,onChange:this.onChange.bind(this,"isGift"),children:Object(k.jsx)(b.Checkbox,{label:" \xa0 THIS ORDER IS A GIFT",name:"isGift"})})})})}),Object(k.jsx)(b.Layout.Col,{span:"24",children:Object(k.jsx)("div",{className:"grid-content",style:{borderRadius:"10px 10px 1px 1px"},children:Object(k.jsx)("div",{className:"d-font-bold d-white d-text-14",style:{display:"inline",marginLeft:20},children:"ORDER NOTES (OPTIONAL)"})})}),Object(k.jsx)(b.Layout.Col,{span:"24",children:Object(k.jsx)("div",{className:"grid-content",style:{borderRadius:"10px 10px 1px 1px"},children:Object(k.jsx)(b.Input,{type:"textarea",value:this.state.form.description,onChange:this.onChange.bind(this,"description"),style:{width:"95%",margin:"0px 20px 0px 20px"}})})})]})})}),Object(k.jsx)("div",{style:{padding:20},children:Object(k.jsx)(b.Button,{onClick:this.onHelloSign.bind(this),type:"success",className:"d-font-bold d-text-28 w-100",style:{background:"#03ffa4",color:"black",borderRadius:10},children:"Hello Sign"})})]}),Object(k.jsx)(b.Layout.Col,{span:24,children:Object(k.jsx)("div",{className:"grid-content",children:Object(k.jsx)("div",{className:"register-ruleForm d-font-bold",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:Object(k.jsxs)(b.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 15px 0px"},children:[Object(k.jsx)(b.Layout.Col,{span:"24",children:Object(k.jsx)("div",{className:"grid-content d-content-highlight",style:{borderRadius:"10px 10px 1px 1px"},children:Object(k.jsx)("div",{className:"d-font-bold d-black",style:{display:"inline",marginLeft:10},children:"YOUR ORDER"})})}),Object(k.jsxs)(y.a,{striped:!0,hover:!0,variant:"dark",style:{margin:0,fontSize:15},className:"text-center",children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{className:"bg-secondary",children:"#"}),Object(k.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Product"}),Object(k.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Sub Total"})]})}),Object(k.jsxs)("tbody",{children:[this.state.productItems.map((function(e,t){return Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:t+1}),Object(k.jsx)("td",{children:e.identifier}),Object(k.jsx)("td",{children:e.subtotal})]},t)})),Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{}),Object(k.jsx)("td",{children:"TOTAL"}),Object(k.jsxs)("td",{children:["$",this.state.totalPrice]})]})]})]})]})})})}),Object(k.jsx)(b.Layout.Col,{span:24,style:{zIndex:100},children:Object(k.jsxs)("div",{className:"grid-content",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:[Object(k.jsxs)("div",{style:{margin:"2%"},children:[Object(k.jsx)(b.Radio,{value:"1",checked:"1"===this.state.form.payCard,onChange:this.onChangePaycard.bind(this),className:"d-font-bold d-white d-text-28",children:"\xa0\xa0PAY WITH CRYPTOCURRENCY"}),Object(k.jsx)("div",{className:"d-font-book d-text-28 d-highlight",children:"Pay with cryptocurrency. If you pay in USDC or DAI, you mush pay only on the ETHEREUM network!"}),"1"===this.state.form.payCard&&this.state.coinbaseId&&this.state.hellosignId&&Object(k.jsx)("div",{children:Object(k.jsx)(C.a,{checkoutId:this.state.coinbaseId,styled:!0,onChargeSuccess:function(){return alert("success")},onChargeFailure:function(){return console.log("Failure")}})})]}),Object(k.jsx)("div",{style:{margin:"2%"},children:Object(k.jsx)(b.Radio,{value:"2",checked:"2"===this.state.form.payCard,onChange:this.onChangePaycard.bind(this),className:"d-font-bold d-white d-text-28",children:"\xa0 \xa0PAY WITH PAYPAL"})}),"2"==this.state.form.payCard&&this.state.hellosignId&&Object(k.jsx)("div",{className:"d-flex justify-content-center",children:Object(k.jsx)("div",{className:"w-100",style:{maxWidth:400},children:Object(k.jsx)(g.PayPalButton,{amount:this.state.totalPrice,onSuccess:function(e,n){t.onPaypalSuccess(e,n)},options:{clientId:null===(e=this.props.credentialData[0])||void 0===e?void 0:e.paypalAppClientId}})})}),Object(k.jsxs)("div",{className:"d-font-book d-text-30 d-white",style:{margin:"2%"},children:[Object(k.jsx)("div",{children:"Your proposal data will be used to process your order, support your experience throughout this website, and for other purposes described in our \xa0"}),Object(k.jsx)("button",{type:"button",className:"d-highlight",children:"Privacy Policy"})]}),Object(k.jsx)("div",{style:{textAlign:"right",marginRight:"3%"},children:Object(k.jsx)(b.Checkbox.Group,{value:this.state.form.isAgree,onChange:this.onChange.bind(this,"isAgree"),children:Object(k.jsx)(b.Checkbox,{label:" \xa0 I HAVE READ AND AGREE TO THE WEBSITE TEAMS AND CONDITIONS",name:"isAgree",className:"d-font-bold d-white",style:{fontSize:"2em"}})})}),Object(k.jsx)("div",{className:"block",style:{marginTop:30},children:Object(k.jsx)("div",{className:"wrapper",style:{textAlign:"right",margin:"3% 3% 3% 0"},children:Object(k.jsx)(b.Button,{onClick:this.handleSubmit.bind(this),type:"success",className:"d-font-bold d-text-28",style:{width:"50%",background:"#03ffa4",color:"black",borderRadius:10},children:"PLACE ORDER"})})})]})})]})})})})}}]),n}(p.Component));t.default=P},420:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var s=n(45),a=n(418),r=n(106),i=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,o=function(e){return function(t){Object(a.d)("/api/admin/property",e,i).then((function(n){r.Notification.success({title:"Success",message:"House Properties Submit Success!",type:"success"}),t({type:s.a,payload:e})})).catch((function(e){console.log(e),r.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},c=function(e){return function(t){return Object(a.c)("/api/property?count=".concat(e)).then((function(e){for(var n=e.data,a=0;a<n.length;a++)n[a].monthlyNetRent=n[a].monthlyGrossRent-n[a].monthlyCosts,n[a].yearlyNetRent=12*(n[a].monthlyGrossRent-n[a].monthlyCosts),n[a].totalInvestment=n[a].generatedToken*n[a].tokenValue,n[a].expectedYield=12*(n[a].monthlyGrossRent-n[a].monthlyCosts)/(n[a].generatedToken*n[a].tokenValue),n[a].imageData=n[a].imageData.split(",");t({type:s.d,payload:n})})).catch((function(e){t({type:s.e})}))}},l=function(e){return function(t){return Object(a.c)("/api/property/id?ID=".concat(e)).then((function(e){var n=e.data;return n.monthlyGrossRent=n.monthlyGrossRent,n.monthlyNetRent=n.monthlyGrossRent-n.monthlyCosts,n.yearlyNetRent=12*(n.monthlyGrossRent-n.monthlyCosts),n.totalInvestment=n.generatedToken*n.tokenValue,n.expectedYield=12*(n.monthlyGrossRent-n.monthlyCosts)/parseFloat(n.generatedToken*n.tokenValue),n.imageData=n.imageData.split(","),t({type:s.b,payload:n})})).catch((function(e){return t({type:s.c})}))}}},580:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}));var s=n(55),a=n(418),r=n(106),i=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,o=function(e){return function(t){Object(a.d)("/api/admin/order",e,i).then((function(n){r.Notification.success({title:"Success",message:"Order Submit Success!",type:"success"}),t({type:s.a,payload:e}),localStorage.removeItem("cartProducts")})).catch((function(e){console.log(e),r.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},c=function(e){return function(t){return Object(a.c)("/api/order?count=".concat(e)).then((function(e){var n=e.data;t({type:s.d,payload:n})})).catch((function(e){t({type:s.e})}))}},l=function(e){return function(t){Object(a.d)("/api/admin/order/update",e,i).then((function(e){})).catch((function(e){console.log(e),r.Notification.error({title:"Failed",message:"Transaction update failed. Please try again.",type:"Warning"})}))}}}}]);
//# sourceMappingURL=30.36c548fa.chunk.js.map