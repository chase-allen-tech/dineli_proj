{"version":3,"sources":["views/Admin/AdminUser.js","redux/actions/user.js","redux/actions/token.js","config/abi.js","services/crypto.js"],"names":["TYPES","ROLES","AdminUser","props","dispatch","useDispatch","useState","modalIndex","setModalIndex","users","useSelector","state","user","userData","token","tokenData","credential","credentialData","useEffect","actionUserList","actionTokenList","onTransferSubmit","e","a","preventDefault","payload","id","role","target","value","type","actionUserUpdateRoleType","className","style","width","bottom","delay","textAlign","labelposition","border","borderRadius","Row","fontSize","margin","Col","span","src","alt","height","striped","hover","variant","minWidth","map","key","onClick","console","log","cursor","email","walletAddress","show","onHide","Header","Title","Body","onSubmit","name","defaultValue","indexOf","Footer","localStorage","getItem","JSON","parse","actionUserCreate","callPost","then","response","Notification","success","title","message","ACTION_USER_ADD","catch","err","error","count","callGet","result","data","ACTION_USER_LIST","ACTION_USER_LIST_FAIL","actionUserUpdate","ACTION_USER_UPDATE_ROLE_TYPE","actionTokenCreate","ACTION_TOKEN_ADD","ACTION_TOKEN_LIST","ACTION_TOKEN_LIST_FAIL","CONTRACT_ABI","transferToken","endpoint","privateKey","fromAddress","toAddress","tokenAddress","tokenAmount","chainId","web3","Web3","providers","HttpProvider","gasLimit","utils","toHex","contract","eth","Contract","toWei","encoded","methods","transfer","encodeABI","tx","to","accounts","signTransaction","signed","sendSignedTransaction","rawTransaction","receipt"],"mappings":"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","file":"static/js/11.d275f16d.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { Button, Layout, Notification } from \"element-react\"\r\nimport Fade from \"react-reveal/Fade\"\r\nimport { Modal, Table as TableBs } from 'react-bootstrap';\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { actionUserList, actionUserUpdateRoleType } from \"../../redux/actions/user\";\r\nimport { actionTokenList } from \"../../redux/actions/token\";\r\n\r\n// import { CONTRACT_ABI } from '../../config/abi';\r\nimport { transferToken } from \"../../services/crypto\";\r\n\r\nconst TYPES = ['NONE', 'BASIC', 'GOLD', 'PREMIUM'];\r\nconst ROLES = ['NONE', 'USER', 'MODERATOR', 'ADMIN'];\r\n\r\nconst AdminUser = props => {\r\n\r\n  const dispatch = useDispatch();\r\n  const [modalIndex, setModalIndex] = useState(-1);\r\n\r\n  const users = useSelector(state => state.user.userData);\r\n  const tokens = useSelector(state => state.token.tokenData);\r\n  const credentials = useSelector(state => state.credential.credentialData);\r\n  useEffect(() => {\r\n    dispatch(actionUserList());\r\n    dispatch(actionTokenList());\r\n  }, []);\r\n\r\n  const successMsg = (msg) => {\r\n    Notification.success({\r\n      title: 'Success',\r\n      message: 'Transaction Success!',\r\n      type: 'success',\r\n    });\r\n  }\r\n\r\n  const errorMsg = () => {\r\n    Notification.error({\r\n      title: 'Failed',\r\n      message: 'Transaction failed. Please try again!',\r\n      type: 'Warning',\r\n    });\r\n  }\r\n\r\n  const onTransferSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const payload = {\r\n      id: users[modalIndex].id,\r\n      role: e.target.role.value,\r\n      type: e.target.type.value,\r\n    }\r\n    setModalIndex(-1);\r\n    dispatch(actionUserUpdateRoleType(payload));\r\n  }\r\n  // const onTransferSubmit = async (e) => {\r\n  //   e.preventDefault();\r\n  //   setModalIndex(-1);\r\n  //   const payload = {\r\n  //     fromAddress: e.target.fromAddress.value,\r\n  //     toAddress: e.target.toAddress.value,\r\n  //     tokenAddress: e.target.tokenAddress.value,\r\n  //     tokenAmount: e.target.tokenAmount.value,\r\n  //     chainId: 42,\r\n  //   }\r\n\r\n  //   let transferResult = await transferToken(credentials[0]?.infuraProjectEndpoint, credentials[0]?.walletPrivateKey, payload.fromAddress, payload.toAddress, payload.tokenAddress, payload.tokenAmount, payload.chainId);\r\n  //   if (transferResult.success) {\r\n  //     successMsg();\r\n  //   } else {\r\n  //     errorMsg();\r\n  //   }\r\n  // }\r\n\r\n  return (\r\n    <div className=\"d-flex flex-column justify-content-center align-items-center overflow-hidden\">\r\n      <div style={{ width: '80%' }}>\r\n        <Fade bottom delay={200}>\r\n          <h1 style={{ textAlign: \"center\" }} className='d-font-bold d-text-90 d-white'>Users</h1>\r\n          {/* <div className=\"d-flex\">\r\n            <Link to=\"/admin/users/new\" className=\"ms-auto\">\r\n              <Button type=\"outlined\">New User</Button>\r\n            </Link>\r\n          </div> */}\r\n          <div className=\"login-ruleForm mt-4\" labelposition={\"top\"} style={{ border: \"2px solid #03ffa4\", borderRadius: \"10px 10px 0 0\" }}>\r\n            <Layout.Row style={{ fontSize: 25, margin: \"-1px 0px 0 0px\" }}>\r\n              <Layout.Col span=\"24\">\r\n                <div className=\"grid-content d-content-highlight d-flex\" style={{ borderRadius: \"10px 10px 1px 1px\" }}>\r\n                  <div className=\"ms-3\">List</div>\r\n                  <div className=\"ms-auto me-3 d-flex align-items-center\">\r\n                    <img src=\"imgs/logo3.png\" alt='logo' style={{ height: \"35px\" }} />\r\n                  </div>\r\n                </div>\r\n              </Layout.Col>\r\n            </Layout.Row>\r\n\r\n            <div className=\"w-100 overflow-auto\">\r\n              <TableBs striped hover variant=\"dark\" style={{ margin: 0 }} className=\"text-center\">\r\n                <thead>\r\n                  <tr>\r\n                    <th className=\"bg-secondary\">#</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Email</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Wallet Address</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Role</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Type</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {\r\n                    users.map((user, key) =>\r\n                      <tr key={key} onClick={(e) => {\r\n                        console.log(\"user\",users[key]);\r\n                        setModalIndex(key)\r\n                      }} style={{ cursor: 'pointer' }}>\r\n                        <td>{key + 1}</td>\r\n                        <td>{user.email}</td>\r\n                        <td>{user.walletAddress}</td>\r\n                        <td>{user.role[0]}</td>\r\n                        <td>{TYPES[user.type]}</td>\r\n                      </tr>\r\n                    )\r\n                  }\r\n                </tbody>\r\n              </TableBs>\r\n            </div>\r\n          </div>\r\n        </Fade>\r\n      </div>\r\n      <Modal show={modalIndex >= 0} onHide={() => setModalIndex(-1)}>\r\n        <Modal.Header>\r\n          <Modal.Title>Change Role or Type</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <form onSubmit={onTransferSubmit}>\r\n            <div className=\"form-group\">\r\n              {users[modalIndex]?.email}\r\n            </div>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Role:</label>\r\n              <select className=\"form-select\" name=\"role\" defaultValue={ROLES.indexOf(users[modalIndex]?.role[0])}>\r\n                {\r\n                  ROLES?.map((role, key) => <option key={key} value={key}>{role}</option>)\r\n                }\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Type:</label>\r\n              <select className=\"form-select\" name=\"type\" defaultValue={users[modalIndex]?.type}>\r\n                {\r\n                  TYPES?.map((type, key) => <option key={key} value={key}>{type}</option>)\r\n                }\r\n              </select>\r\n            </div>\r\n            <Modal.Footer>\r\n              <Button variant=\"secondary\" onClick={() => setModalIndex(-1)}>Close</Button>\r\n              <button type=\"submit\" className=\"btn btn-secondary ms-2\" >Change</button>\r\n            </Modal.Footer>\r\n          </form>\r\n        </Modal.Body>\r\n\r\n      </Modal>\r\n\r\n      {/* <Modal show={modalIndex >= 0} onHide={() => setModalIndex(-1)}>\r\n        <Modal.Header>\r\n          <Modal.Title>Transfer Token</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <form onSubmit={onTransferSubmit}>\r\n            <div className=\"form-group\">\r\n              <div><b>From:</b> {credentials[0]?.walletPublicKey}</div>\r\n              <div><b>To:</b> {users[modalIndex]?.walletAddress}</div>\r\n\r\n              <input name=\"fromAddress\" value={credentials[0]?.walletPublicKey || ''} hidden readOnly />\r\n              <input name=\"toAddress\" value={users[modalIndex]?.walletAddress || ''} hidden readOnly />\r\n            </div>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Token:</label>\r\n              <select className=\"form-select\" name=\"tokenAddress\">\r\n                {\r\n                  tokens?.map((token, key) => <option key={key} value={token.tokenAddress}>{token.tokenAddress}</option>)\r\n                }\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group mt-3\">\r\n              <div className=\"d-flex\">\r\n                <input type=\"number\" className=\"form-control\" step=\"any\" name=\"tokenAmount\" required placeholder=\"Input the amount to transfer\" />\r\n                <button type=\"submit\" className=\"btn btn-secondary ms-2\" >Send</button>\r\n              </div>\r\n            </div>\r\n\r\n          </form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={() => setModalIndex(-1)}>Close</Button>\r\n        </Modal.Footer>\r\n      </Modal> */}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AdminUser;","import {\r\n  ACTION_USER_ADD,\r\n  ACTION_USER_LIST,\r\n  ACTION_USER_LIST_FAIL,\r\n  ACTION_USER_UPDATE_ROLE_TYPE\r\n} from '../actionTypes/user'\r\n\r\nimport { callGet, callPost, } from '../../services/axios'\r\nimport { Notification } from 'element-react'\r\n\r\nconst token = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user'))['accessToken'] : null\r\n\r\nexport const actionUserCreate = (tokenData) => (dispatch) => {\r\n  callPost('/api/admin/user', tokenData, token)\r\n    .then((response) => {\r\n      Notification.success({\r\n        title: 'Success',\r\n        message: 'House Properties Submit Success!',\r\n        type: 'success',\r\n      })\r\n      dispatch({\r\n        type: ACTION_USER_ADD,\r\n        payload: tokenData,\r\n      })\r\n    }).catch(err => {\r\n      console.log(err);\r\n      Notification.error({\r\n        title: 'Failed',\r\n        message: 'Please try again.',\r\n        type: 'Warning',\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionUserList = (count) => (dispatch) => {\r\n  return callGet(`/api/user?count=${count}`)\r\n    .then(function (response) {\r\n      let result = response.data\r\n      dispatch({\r\n        type: ACTION_USER_LIST,\r\n        payload: result,\r\n      })\r\n    })\r\n    .catch((error) => {\r\n      dispatch({\r\n        type: ACTION_USER_LIST_FAIL,\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionUserUpdate = (userData) => dispatch => {\r\n  callPost('/api/admin/user/update', userData, token)\r\n    .then((response) => {\r\n      console.log('[res]', response);\r\n      // dispatch({\r\n      //   type: ACTION_ORDER_ADD,\r\n      //   payload: orderData,\r\n      // })\r\n    }).catch(err => {\r\n      console.log(err);\r\n      Notification.error({\r\n        title: 'Failed',\r\n        message: 'Transaction update failed. Please try again.',\r\n        type: 'Warning',\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionUserUpdateRoleType = (userData) => dispatch => {\r\n  callPost('/api/admin/user/updateroletype', userData, token)\r\n    .then((response) => {\r\n      console.log('[res]', response);\r\n      Notification.success({\r\n        title: 'Success',\r\n        message: 'User\\'s role and type changed Success!',\r\n        type: 'success',\r\n      })\r\n      dispatch({\r\n        type: ACTION_USER_UPDATE_ROLE_TYPE,\r\n        payload: userData,\r\n      })\r\n    }).catch(err => {\r\n      console.log(err);\r\n      Notification.error({\r\n        title: 'Failed',\r\n        message: 'Transaction update failed. Please try again.',\r\n        type: 'Warning',\r\n      })\r\n    }\r\n  )\r\n}","import {\r\n  ACTION_TOKEN_ADD,\r\n  ACTION_TOKEN_LIST,\r\n  ACTION_TOKEN_LIST_FAIL,\r\n  ACTION_TOKEN_GET,\r\n  ACTION_TOKEN_GET_FAIL,\r\n} from '../actionTypes/token'\r\n\r\nimport { callGet, callPost, } from '../../services/axios'\r\nimport { Notification } from 'element-react'\r\n\r\nconst token = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user'))['accessToken'] : null\r\n\r\nexport const actionTokenCreate = (tokenData) => (dispatch) => {\r\n  callPost('/api/admin/token', tokenData, token)\r\n    .then((response) => {\r\n      Notification.success({\r\n        title: 'Success',\r\n        message: 'House Properties Submit Success!',\r\n        type: 'success',\r\n      })\r\n      dispatch({\r\n        type: ACTION_TOKEN_ADD,\r\n        payload: tokenData,\r\n      })\r\n    }).catch(err => {\r\n      console.log(err);\r\n      Notification.error({\r\n        title: 'Failed',\r\n        message: 'Please try again.',\r\n        type: 'Warning',\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionTokenList = (count) => (dispatch) => {\r\n  return callGet(`/api/token?count=${count}`)\r\n    .then(function (response) {\r\n      let result = response.data\r\n      dispatch({\r\n        type: ACTION_TOKEN_LIST,\r\n        payload: result,\r\n      })\r\n    })\r\n    .catch((error) => {\r\n      dispatch({\r\n        type: ACTION_TOKEN_LIST_FAIL,\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionTokenGet = (ID) => (dispatch) => {\r\n  return callGet(`/api/token/id?ID=${ID}`)\r\n    .then(function (response) {\r\n      let result = response.data\r\n      result.monthlyGrossRent = result.yearlyGrossRent / 12\r\n      result.monthlyNetRent = result.yearlyGrossRent / 12 - result.monthlyCosts;\r\n      result.yearlyNetRent = (result.yearlyGrossRent / 12 - result.monthlyCosts) * 12\r\n      result.totalInvestment = result.generatedToken * result.tokenValue\r\n      result.expectedYield = (result.yearlyGrossRent / 12 - result.monthlyCosts) * 12 / (result.generatedToken * result.tokenValue)\r\n      result.imageData = result.imageData.split(',')\r\n\r\n      return dispatch({\r\n        type: ACTION_TOKEN_GET,\r\n        payload: result,\r\n      })\r\n    })\r\n    .catch((error) => {\r\n      return dispatch({\r\n        type: ACTION_TOKEN_GET_FAIL,\r\n      })\r\n    }\r\n  )\r\n}","export const CONTRACT_ABI = [\r\n  {\r\n    \"inputs\": [],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"constructor\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"spender\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"value\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"Approval\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"anonymous\": false,\r\n    \"inputs\": [\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"from\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": true,\r\n        \"internalType\": \"address\",\r\n        \"name\": \"to\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"indexed\": false,\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"value\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"Transfer\",\r\n    \"type\": \"event\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"owner\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"spender\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"allowance\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"spender\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"amount\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"approve\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"account\",\r\n        \"type\": \"address\"\r\n      }\r\n    ],\r\n    \"name\": \"balanceOf\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"decimals\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint8\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint8\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"spender\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"subtractedValue\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"decreaseAllowance\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"spender\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"addedValue\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"increaseAllowance\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"name\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"symbol\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"string\",\r\n        \"name\": \"\",\r\n        \"type\": \"string\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [],\r\n    \"name\": \"totalSupply\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"view\",\r\n    \"type\": \"function\",\r\n    \"constant\": true\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"recipient\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"amount\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"transfer\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  },\r\n  {\r\n    \"inputs\": [\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"sender\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"address\",\r\n        \"name\": \"recipient\",\r\n        \"type\": \"address\"\r\n      },\r\n      {\r\n        \"internalType\": \"uint256\",\r\n        \"name\": \"amount\",\r\n        \"type\": \"uint256\"\r\n      }\r\n    ],\r\n    \"name\": \"transferFrom\",\r\n    \"outputs\": [\r\n      {\r\n        \"internalType\": \"bool\",\r\n        \"name\": \"\",\r\n        \"type\": \"bool\"\r\n      }\r\n    ],\r\n    \"stateMutability\": \"nonpayable\",\r\n    \"type\": \"function\"\r\n  }\r\n];","import Web3 from 'web3';\r\nimport { CONTRACT_ABI } from '../config/abi';\r\n\r\nexport const tokenInfo = async (endpoint, tokenAddress) => {\r\n  const web3 = new Web3(new Web3.providers.HttpProvider(endpoint));\r\n  const contract = new web3.eth.Contract(CONTRACT_ABI, tokenAddress);\r\n  const tokenName = await contract.methods.symbol().call();\r\n  return tokenName;\r\n}\r\n\r\nfunction financialBalance(numMfil) {\r\n  return Number.parseFloat(numMfil / 1e18).toFixed(18);\r\n}\r\n\r\nexport const balanceAvailable = async (endpoint, fromAddress, tokenAddress, tokenAmount) => {\r\n  const web3 = new Web3(new Web3.providers.HttpProvider(endpoint));\r\n  let contract = new web3.eth.Contract(CONTRACT_ABI, tokenAddress);\r\n  let balance = await contract.methods.balanceOf(fromAddress).call();\r\n  console.log('[balance]', financialBalance(balance), tokenAmount)\r\n  if(financialBalance(balance) < parseFloat(tokenAmount)) {\r\n    return false;\r\n  } \r\n  return true;\r\n}\r\n\r\nexport const transferToken = async (endpoint, privateKey, fromAddress, toAddress, tokenAddress, tokenAmount, chainId) => {\r\n  const web3 = new Web3(new Web3.providers.HttpProvider(endpoint));\r\n  const gasLimit = web3.utils.toHex(6200000);\r\n\r\n  try {\r\n\r\n    let contract = new web3.eth.Contract(CONTRACT_ABI, tokenAddress);\r\n\r\n    // # of transactions in my account\r\n    // let count = await web3.eth.getTransactionCount(fromAddress);\r\n    // console.log('Number of transactions so far in my account: ', count);\r\n\r\n    // My balance\r\n    // let balance = await contract.methods.balanceOf(fromAddress).call();\r\n    // console.log('Balance before send: ', financialBalance(balance));\r\n    \r\n    // if(balance < tokenAmount) return { success: false };\r\n    tokenAmount = web3.utils.toWei(tokenAmount, 'ether')\r\n\r\n    let encoded = contract.methods.transfer(toAddress, tokenAmount).encodeABI();\r\n    let tx = {\r\n      gasLimit: gasLimit,\r\n      to: tokenAddress,\r\n      data: encoded,\r\n      chainId: chainId\r\n    };\r\n\r\n    let signed = await web3.eth.accounts.signTransaction(tx, privateKey);\r\n    let receipt = await web3.eth.sendSignedTransaction(signed.rawTransaction);\r\n\r\n    console.log('[transfer result]', receipt);\r\n    return { success: true, data: receipt};\r\n  } catch (err) {\r\n    console.log('[err]', err);\r\n    return { success: false };\r\n  }\r\n}"],"sourceRoot":""}