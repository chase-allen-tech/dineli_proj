(this.webpackJsonpdineli=this.webpackJsonpdineli||[]).push([[11],{1118:function(e,t,n){"use strict";n.r(t);var a=n(442),s=n.n(a),i=n(491),c=n(451),r=n(112),o=n(1),d=n(107),l=n(110),u=n.n(l),p=n(433),y=n(1108),b=n(109),m=n(424),j=n(773),f=n.n(j),h=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];var O=function(){var e=Object(i.a)(s.a.mark((function e(t,n,a,i,c,r,o){var d,l,u,p,y,b,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=new f.a(new f.a.providers.HttpProvider(t)),l=d.utils.toHex(62e5),e.prev=2,u=new d.eth.Contract(h,c),r=d.utils.toWei(r,"ether"),p=u.methods.transfer(i,r).encodeABI(),y={gasLimit:l,to:c,data:p,chainId:o},e.next=9,d.eth.accounts.signTransaction(y,n);case 9:return b=e.sent,e.next=12,d.eth.sendSignedTransaction(b.rawTransaction);case 12:return m=e.sent,console.log("[transfer result]",m),e.abrupt("return",{success:!0,data:m});case 17:return e.prev=17,e.t0=e.catch(2),console.log("[err]",e.t0),e.abrupt("return",{success:!1});case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,n,a,s,i,c,r){return e.apply(this,arguments)}}(),g=n(476),x=n(9);t.default=function(e){var t,n,a,l,j=Object(b.c)(),f=Object(o.useState)(-1),h=Object(r.a)(f,2),v=h[0],T=h[1],N=Object(o.useState)([]),w=Object(r.a)(N,2),S=w[0],k=w[1],A=Object(o.useState)(!1),P=Object(r.a)(A,2),I=P[0],M=P[1],W=Object(b.d)((function(e){return e.user.userData})),F=Object(b.d)((function(e){return e.order.orderData})),C=Object(b.d)((function(e){return e.credential.credentialData}));Object(o.useEffect)((function(){j(Object(m.b)()),j(Object(g.b)())}),[]),Object(o.useEffect)((function(){if(F.length){var e,t=[],n=Object(c.a)(F);try{for(n.s();!(e=n.n()).done;){var a=e.value;Array.isArray(a.details)||(a.details=JSON.parse(a.details)),t.push(a)}}catch(s){n.e(s)}finally{n.f()}k(t)}}),[F]);var H=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n,a,i,c,r,o,d,l,u,p,y;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(!0),t=[],n=0;case 3:if(!(n<S.length)){e.next=29;break}if(a=S[n],i=Object.assign({},a),"complete"!=a.status){e.next=9;break}return t.push(i),e.abrupt("continue",26);case 9:c=!1,r=0;case 11:if(!(r<a.details.length)){e.next=22;break}return l=a.details[r],u={fromAddress:C[0].walletPublicKey,toAddress:l.toAddress,tokenAddress:l.tokenAddress,tokenAmount:l.tokenQuantity,chainId:C[0].blockchainId},console.log("[payload]",u),e.next=17,O(null===(o=C[0])||void 0===o?void 0:o.infuraProjectEndpoint,null===(d=C[0])||void 0===d?void 0:d.walletPrivateKey,u.fromAddress,u.toAddress,u.tokenAddress,u.tokenAmount,u.chainId);case 17:(p=e.sent).success?(console.log(p.data),i.details[r].hash=p.data.transactionHash):(c=!0,console.log(p));case 19:r++,e.next=11;break;case 22:c||(i.status="complete"),t.push(i),y={id:i.id,userId:i.userId,status:i.status,totalPrice:i.totalPrice,count:i.count,paymentMethod:i.paymentMethod,details:JSON.stringify(i.details)},j(Object(g.c)(y));case 26:n++,e.next=3;break;case 29:k(t),M(!1);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center overflow-hidden",children:[Object(x.jsx)("div",{style:{width:"80%"},children:Object(x.jsxs)(u.a,{bottom:!0,delay:200,children:[Object(x.jsx)("h1",{style:{textAlign:"center"},className:"d-font-bold d-text-90 d-white",children:"Transaction"}),Object(x.jsx)("div",{className:"d-flex",children:Object(x.jsx)(d.Button,{type:"outlined",className:"ms-auto",onClick:H,disabled:I,children:I?"Processing":"Complete Transactions"})}),Object(x.jsxs)("div",{className:"login-ruleForm mt-4",labelposition:"top",style:{border:"2px solid #03ffa4",borderRadius:"10px 10px 0 0"},children:[Object(x.jsx)(d.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 0 0px"},children:Object(x.jsx)(d.Layout.Col,{span:"24",children:Object(x.jsxs)("div",{className:"grid-content d-content-highlight d-flex",style:{borderRadius:"10px 10px 1px 1px"},children:[Object(x.jsx)("div",{className:"ms-3",children:"List"}),Object(x.jsx)("div",{className:"ms-auto me-3 d-flex align-items-center",children:Object(x.jsx)("img",{src:"imgs/logo3.png",alt:"logo",style:{height:"35px"}})})]})})}),Object(x.jsx)("div",{className:"w-100 overflow-auto",children:Object(x.jsxs)(p.a,{striped:!0,hover:!0,variant:"dark",style:{margin:0},className:"text-center",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{className:"bg-secondary",children:"#"}),Object(x.jsx)("th",{className:"bg-secondary",children:"Status"}),Object(x.jsx)("th",{className:"bg-secondary",children:"User"}),Object(x.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Total Price"}),Object(x.jsx)("th",{className:"bg-secondary",children:"Count"}),Object(x.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Payment Method"}),Object(x.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Signature ID"}),Object(x.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Token Address"}),Object(x.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Target Wallet Address"}),Object(x.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Token Quantity"}),Object(x.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Transaction Hash"})]})}),Object(x.jsx)("tbody",{children:S.map((function(e,t){return Object(x.jsx)(o.Fragment,{children:e.details.map((function(n,a){var s;return Object(x.jsxs)("tr",{className:"align-middle",children:[0===a&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("td",{rowSpan:e.details.length,children:t+1}),Object(x.jsx)("td",{rowSpan:e.details.length,children:"pending"===e.status?Object(x.jsx)("div",{className:"badge bg-primary",children:e.status}):Object(x.jsx)("div",{className:"badge bg-secondary",children:e.status})}),Object(x.jsx)("td",{rowSpan:e.details.length,children:null===(s=W.find((function(t){return t.id===e.userId})))||void 0===s?void 0:s.username}),Object(x.jsx)("td",{rowSpan:e.details.length,children:e.totalPrice}),Object(x.jsx)("td",{rowSpan:e.details.length,children:e.count}),Object(x.jsx)("td",{rowSpan:e.details.length,children:e.paymentMethod}),Object(x.jsx)("td",{rowSpan:e.details.length,children:e.signatureId})]}),Object(x.jsx)("td",{children:n.tokenAddress}),Object(x.jsx)("td",{children:n.toAddress}),Object(x.jsx)("td",{children:n.tokenQuantity}),Object(x.jsx)("td",{children:null===n||void 0===n?void 0:n.hash})]},a)}))},t)}))})]})})]})]})}),Object(x.jsxs)(y.a,{show:v>=0,onHide:function(){return T(-1)},children:[Object(x.jsx)(y.a.Header,{children:Object(x.jsx)(y.a.Title,{children:"Transfer Token"})}),Object(x.jsx)(y.a.Body,{children:Object(x.jsxs)("form",{onSubmit:H,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("b",{children:"From:"})," ",null===(t=C[0])||void 0===t?void 0:t.walletPublicKey]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("b",{children:"To:"})," ",null===(n=W[v])||void 0===n?void 0:n.walletAddress]}),Object(x.jsx)("input",{name:"fromAddress",value:(null===(a=C[0])||void 0===a?void 0:a.walletPublicKey)||"",hidden:!0,readOnly:!0}),Object(x.jsx)("input",{name:"toAddress",value:(null===(l=W[v])||void 0===l?void 0:l.walletAddress)||"",hidden:!0,readOnly:!0})]}),Object(x.jsxs)("div",{className:"form-group mt-2",children:[Object(x.jsx)("label",{children:"Token:"}),Object(x.jsx)("select",{className:"form-select",name:"tokenAddress"})]}),Object(x.jsx)("div",{className:"form-group mt-3",children:Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsx)("input",{type:"number",className:"form-control",step:"any",name:"tokenAmount",required:!0,placeholder:"Input the amount to transfer"}),Object(x.jsx)("button",{type:"submit",className:"btn btn-secondary ms-2",children:"Send"})]})})]})}),Object(x.jsx)(y.a.Footer,{children:Object(x.jsx)(d.Button,{variant:"secondary",onClick:function(){return T(-1)},children:"Close"})})]})]})}},424:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return p}));var a=n(43),s=n(421),i=n(419),c=n(107),r=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,o=function(e){return function(t){Object(i.d)("/api/admin/user",e,r).then((function(n){c.Notification.success({title:"Success",message:"House Properties Submit Success!",type:"success"}),t({type:a.a,payload:e})})).catch((function(e){console.log(e),c.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},d=function(e){return function(t){return Object(i.c)("/api/user?count=".concat(e)).then((function(e){var n=e.data;t({type:a.b,payload:n})})).catch((function(e){t({type:a.c})}))}},l=function(e){return function(t){Object(i.d)("/api/admin/user/update",e,r).then((function(n){console.log("[res]",n),c.Notification.success({title:"Success",message:n.data.message,type:"success"}),t({type:a.e,payload:e})})).catch((function(e){console.log(e),c.Notification.error({title:"Failed",message:"Transaction update failed. Please try again.",type:"Warning"})}))}},u=function(e){return function(t){Object(i.d)("/api/admin/user/update/card",e,r).then((function(n){console.log("[res]",n),c.Notification.success({title:"Success",message:n.data.message,type:"success"}),t(Object(s.g)(e.card))})).catch((function(e){console.log(e),c.Notification.error({title:"Failed",message:"Transaction update failed. Please try again.",type:"Warning"})}))}},p=function(e){return function(t){t({type:a.d,payload:e})}}},476:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(7),s=n(42),i=n(419),c=n(107),r=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,o=function(e){return function(t){Object(i.d)("/api/admin/order",e,r).then((function(n){c.Notification.success({title:"Success",message:"Order Submit Success!",type:"success"}),t({type:s.a,payload:e}),localStorage.removeItem("cartProducts")})).catch((function(e){console.log(e),c.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},d=function(e){return function(t){return Object(i.c)("/api/order?count=".concat(e)).then((function(e){var n=e.data;t({type:s.d,payload:n})})).catch((function(e){t({type:s.e})}))}},l=function(e){return function(t){return Object(i.c)("/api/order/uid?ID=".concat(e)).then((function(e){var n=e.data;return n=n.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{details:JSON.parse(e.details)})})),t({type:s.f,payload:n})})).catch((function(e){return t({type:s.c})}))}},u=function(e){return function(t){Object(i.d)("/api/admin/order/update",e,r).then((function(e){})).catch((function(e){console.log(e),c.Notification.error({title:"Failed",message:"Transaction update failed. Please try again.",type:"Warning"})}))}}},785:function(e,t){},794:function(e,t){},812:function(e,t){},814:function(e,t){},834:function(e,t){},837:function(e,t){},897:function(e,t){},899:function(e,t){},909:function(e,t){},911:function(e,t){},936:function(e,t){},938:function(e,t){},939:function(e,t){},944:function(e,t){},946:function(e,t){},959:function(e,t){},971:function(e,t){},974:function(e,t){},979:function(e,t){},987:function(e,t){}}]);
//# sourceMappingURL=11.eca45347.chunk.js.map