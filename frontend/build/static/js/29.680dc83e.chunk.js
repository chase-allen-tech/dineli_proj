(this.webpackJsonpdineli=this.webpackJsonpdineli||[]).push([[29],{1107:function(e,t,n){"use strict";n.r(t);var c=n(451),s=n(112),i=n(1),r=n(107),a=n(110),o=n.n(a),l=n(433),d=n(1108),u=n(109),j=n(424),b=n(419),h=n(9),f=["NONE","BASIC","GOLD","PREMIUM"];t.default=function(e){var t=Object(u.c)(),n=Object(u.d)((function(e){return e.user.userData})),a=Object(i.useState)(!1),m=Object(s.a)(a,2),p=m[0],y=m[1],g=Object(i.useState)(""),x=Object(s.a)(g,2),O=x[0],N=x[1],v=Object(i.useState)(""),S=Object(s.a)(v,2),k=S[0],w=S[1];Object(i.useEffect)((function(){n||t(Object(j.b)())}),[]);return Object(h.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center overflow-hidden",children:[Object(h.jsx)("div",{style:{width:"80%"},children:Object(h.jsxs)(o.a,{bottom:!0,delay:200,children:[Object(h.jsx)("h1",{style:{textAlign:"center"},className:"d-font-bold d-text-90 d-white",children:"Newsletter"}),Object(h.jsx)("div",{className:"d-flex",children:Object(h.jsx)(r.Button,{type:"outlined",className:"ms-auto",onClick:function(){return y(!0)},children:"Send Newsletter"})}),Object(h.jsxs)("div",{className:"login-ruleForm mt-4",labelposition:"top",style:{border:"2px solid #03ffa4",borderRadius:"10px 10px 0 0"},children:[Object(h.jsx)(r.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 0 0px"},children:Object(h.jsx)(r.Layout.Col,{span:"24",children:Object(h.jsxs)("div",{className:"grid-content d-content-highlight d-flex",style:{borderRadius:"10px 10px 1px 1px"},children:[Object(h.jsx)("div",{className:"ms-3",children:"List"}),Object(h.jsx)("div",{className:"ms-auto me-3 d-flex align-items-center",children:Object(h.jsx)("img",{src:"imgs/logo3.png",alt:"logo",style:{height:"35px"}})})]})})}),Object(h.jsx)("div",{className:"w-100 overflow-auto",children:Object(h.jsxs)(l.a,{striped:!0,hover:!0,variant:"dark",style:{margin:0},className:"text-center",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{className:"bg-secondary",children:Object(h.jsx)("input",{type:"checkbox",onChange:function(e){var t,n=e.target.checked,s=document.querySelectorAll("td > input"),i=Object(c.a)(s);try{for(i.s();!(t=i.n()).done;){t.value.checked=n}}catch(r){i.e(r)}finally{i.f()}}})}),Object(h.jsx)("th",{className:"bg-secondary",children:"#"}),Object(h.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Email"}),Object(h.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Wallet Address"}),Object(h.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Role"}),Object(h.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Type"})]})}),Object(h.jsx)("tbody",{children:n.map((function(e,t){return Object(h.jsxs)("tr",{onClick:function(e){return function(e,t){console.log(e.target),-1===e.target.id.indexOf("check")&&(document.getElementById("check_".concat(t)).checked=!document.getElementById("check_".concat(t)).checked),console.log("user click",t)}(e,t)},style:{cursor:"pointer"},children:[Object(h.jsx)("td",{children:Object(h.jsx)("input",{id:"check_".concat(t),type:"checkbox"})}),Object(h.jsx)("td",{children:t+1}),Object(h.jsx)("td",{children:e.email}),Object(h.jsx)("td",{children:e.walletAddress}),Object(h.jsx)("td",{children:e.role[0]}),Object(h.jsx)("td",{children:f[e.type]})]},t)}))})]})})]})]})}),Object(h.jsxs)(d.a,{show:p,onHide:function(){return y(!1)},children:[Object(h.jsx)(d.a.Header,{children:Object(h.jsx)(d.a.Title,{children:"Newsletter"})}),Object(h.jsx)(d.a.Body,{children:Object(h.jsxs)("form",{onSubmit:function(e){var t,s=document.querySelectorAll("td > input"),i=[],a=Object(c.a)(s);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(o.checked){var l=Number(o.id.split("_")[1]);i.push(n[l].email)}}}catch(u){a.e(u)}finally{a.f()}if(0!==i.length){O.trim()&&k.trim()||r.Notification.error({title:"Warning",message:"Please fill in the subject and content",type:"Warning"});var d=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null;Object(b.d)("/api/admin/newsletter",{emails:i,subject:O,content:k},d).then((function(e){r.Notification.success({title:"Success",message:"Send Newsletters Success!",type:"success"})})).catch((function(e){console.log("[Image Upload Fail]",e)}))}else r.Notification.error({title:"Warning",message:"Select at least one user!",type:"Warning"})},children:[Object(h.jsxs)("div",{className:"form-group mt-2",children:[Object(h.jsx)("label",{children:"Subject:"}),Object(h.jsx)(r.Input,{type:"text",onChange:function(e){return N(e)}})]}),Object(h.jsxs)("div",{className:"form-group mt-2",children:[Object(h.jsx)("label",{children:"Content:"}),Object(h.jsx)(r.Input,{type:"textarea",onChange:function(e){return w(e)}})]}),Object(h.jsxs)(d.a.Footer,{children:[Object(h.jsx)(r.Button,{variant:"secondary",onClick:function(){return y(!1)},children:"Close"}),Object(h.jsx)("button",{type:"submit",className:"btn btn-secondary ms-2",children:"Send"})]})]})})]})]})}},424:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return j}));var c=n(43),s=n(421),i=n(419),r=n(107),a=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,o=function(e){return function(t){Object(i.d)("/api/admin/user",e,a).then((function(n){r.Notification.success({title:"Success",message:"House Properties Submit Success!",type:"success"}),t({type:c.a,payload:e})})).catch((function(e){console.log(e),r.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},l=function(e){return function(t){return Object(i.c)("/api/user?count=".concat(e)).then((function(e){var n=e.data;t({type:c.b,payload:n})})).catch((function(e){t({type:c.c})}))}},d=function(e){return function(t){Object(i.d)("/api/admin/user/update",e,a).then((function(n){console.log("[res]",n),r.Notification.success({title:"Success",message:n.data.message,type:"success"}),t({type:c.e,payload:e})})).catch((function(e){console.log(e),r.Notification.error({title:"Failed",message:"Transaction update failed. Please try again.",type:"Warning"})}))}},u=function(e){return function(t){Object(i.d)("/api/admin/user/update/card",e,a).then((function(n){console.log("[res]",n),r.Notification.success({title:"Success",message:n.data.message,type:"success"}),t(Object(s.g)(e.card))})).catch((function(e){console.log(e),r.Notification.error({title:"Failed",message:"Transaction update failed. Please try again.",type:"Warning"})}))}},j=function(e){return function(t){t({type:c.d,payload:e})}}},451:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var c=n(69);function s(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(c.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var s=0,i=function(){};return{s:i,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw r}}}}}}]);
//# sourceMappingURL=29.680dc83e.chunk.js.map