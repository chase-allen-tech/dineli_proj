{"version":3,"sources":["views/Admin/AdminNewsletter.js","redux/actions/user.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js"],"names":["TYPES","AdminNewsletter","props","dispatch","useDispatch","users","useSelector","state","user","userData","useState","modal","setModal","subject","setSubject","content","setContent","useEffect","actionUserList","className","style","width","bottom","delay","textAlign","type","onClick","labelposition","border","borderRadius","Row","fontSize","margin","Col","span","src","alt","height","striped","hover","variant","onChange","e","checked","target","elements","document","querySelectorAll","minWidth","map","key","console","log","id","indexOf","getElementById","onUserClick","cursor","email","walletAddress","role","show","onHide","Header","Title","Body","onSubmit","emails","elem","index","Number","split","push","length","trim","Notification","error","title","message","token","localStorage","getItem","JSON","parse","callPost","then","res","success","catch","err","val","Footer","actionUserCreate","tokenData","response","ACTION_USER_ADD","payload","count","callGet","result","data","ACTION_USER_LIST","ACTION_USER_LIST_FAIL","actionUserUpdate","ACTION_USER_UPDATE","actionUserUpdateCard","cardData","actionAuthUpdateCard","card","actionUserSetCurrent","ACTION_USER_SET_CURRENT","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","i","F","s","n","done","value","_e","f","TypeError","normalCompletion","didErr","step","next","_e2"],"mappings":"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","file":"static/js/29.680dc83e.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { Layout, Notification, Button, Form, Input } from \"element-react\"\r\nimport Fade from \"react-reveal/Fade\"\r\nimport { Modal, Table as TableBs } from 'react-bootstrap';\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { actionUserList } from \"../../redux/actions/user\";\r\nimport { callPost } from \"../../services/axios\";\r\n\r\n// import { CONTRACT_ABI } from '../../config/abi';\r\n\r\nconst TYPES = ['NONE', 'BASIC', 'GOLD', 'PREMIUM'];\r\n\r\nconst AdminNewsletter = props => {\r\n  const dispatch = useDispatch();\r\n  const users = useSelector(state => state.user.userData);\r\n  const [modal, setModal] = useState(false);\r\n  const [subject, setSubject] = useState(\"\");\r\n  const [content, setContent] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (!users)\r\n      dispatch(actionUserList());\r\n  }, []);\r\n\r\n  const onUserClick = (e, key) => {\r\n    console.log(e.target);\r\n    if (e.target.id.indexOf('check') === -1)\r\n      document.getElementById(`check_${key}`).checked = !document.getElementById(`check_${key}`).checked\r\n    console.log('user click', key);\r\n  }\r\n\r\n  const onSelectAll = (e) => {\r\n    let checked = e.target.checked;\r\n    let elements = document.querySelectorAll('td > input');\r\n\r\n    for (let elem of elements) {\r\n      elem.checked = checked;\r\n    }\r\n  }\r\n\r\n  const onTransferSubmit = (e) => {\r\n    let elements = document.querySelectorAll('td > input');\r\n    let emails = [];\r\n    for (let elem of elements) {\r\n      if (elem.checked) {\r\n        let index = Number(elem.id.split('_')[1]);\r\n        emails.push(users[index].email);\r\n      }\r\n    }\r\n    if (emails.length === 0) {\r\n      Notification.error({\r\n        title: 'Warning',\r\n        message: 'Select at least one user!',\r\n        type: 'Warning',\r\n      });\r\n      return;\r\n    }\r\n    if(!subject.trim() || !content.trim()){\r\n      Notification.error({\r\n        title: 'Warning',\r\n        message: 'Please fill in the subject and content',\r\n        type: 'Warning',\r\n      });\r\n    }\r\n    const token = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user'))['accessToken'] : null;\r\n    callPost('/api/admin/newsletter', {emails, subject, content}, token)\r\n      .then(res => {\r\n        Notification.success({\r\n          title: 'Success',\r\n          message: 'Send Newsletters Success!',\r\n          type: 'success',\r\n        });\r\n      }).catch(err => {\r\n        console.log('[Image Upload Fail]', err);\r\n      })\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex flex-column justify-content-center align-items-center overflow-hidden\">\r\n      <div style={{ width: '80%' }}>\r\n        <Fade bottom delay={200}>\r\n          <h1 style={{ textAlign: \"center\" }} className='d-font-bold d-text-90 d-white'>Newsletter</h1>\r\n          <div className=\"d-flex\">\r\n            <Button type=\"outlined\" className='ms-auto' onClick={() => setModal(true)}>Send Newsletter</Button>\r\n          </div>\r\n          <div className=\"login-ruleForm mt-4\" labelposition={\"top\"} style={{ border: \"2px solid #03ffa4\", borderRadius: \"10px 10px 0 0\" }}>\r\n            <Layout.Row style={{ fontSize: 25, margin: \"-1px 0px 0 0px\" }}>\r\n              <Layout.Col span=\"24\">\r\n                <div className=\"grid-content d-content-highlight d-flex\" style={{ borderRadius: \"10px 10px 1px 1px\" }}>\r\n                  <div className=\"ms-3\">List</div>\r\n                  <div className=\"ms-auto me-3 d-flex align-items-center\">\r\n                    <img src=\"imgs/logo3.png\" alt='logo' style={{ height: \"35px\" }} />\r\n                  </div>\r\n                </div>\r\n              </Layout.Col>\r\n            </Layout.Row>\r\n\r\n            <div className=\"w-100 overflow-auto\">\r\n              <TableBs striped hover variant=\"dark\" style={{ margin: 0 }} className=\"text-center\">\r\n                <thead>\r\n                  <tr>\r\n                    <th className=\"bg-secondary\"><input type='checkbox' onChange={onSelectAll}></input></th>\r\n                    <th className=\"bg-secondary\">#</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Email</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Wallet Address</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Role</th>\r\n                    <th className=\"bg-secondary\" style={{ minWidth: 130 }}>Type</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {\r\n                    users.map((user, key) =>\r\n                      <tr key={key} onClick={(e) => onUserClick(e, key)} style={{ cursor: 'pointer' }}>\r\n                        <td><input id={`check_${key}`} type='checkbox' /></td>\r\n                        <td>{key + 1}</td>\r\n                        <td>{user.email}</td>\r\n                        <td>{user.walletAddress}</td>\r\n                        <td>{user.role[0]}</td>\r\n                        <td>{TYPES[user.type]}</td>\r\n                      </tr>\r\n                    )\r\n                  }\r\n                </tbody>\r\n              </TableBs>\r\n            </div>\r\n          </div>\r\n        </Fade>\r\n      </div>\r\n      <Modal show={modal} onHide={() => setModal(false)}>\r\n        <Modal.Header>\r\n          <Modal.Title>Newsletter</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <form onSubmit={onTransferSubmit}>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Subject:</label>\r\n              <Input type='text' onChange={val=>setSubject(val)}/>\r\n            </div>\r\n            <div className=\"form-group mt-2\">\r\n              <label>Content:</label>\r\n              <Input type='textarea' onChange={val=>setContent(val)}/>\r\n            </div>\r\n            <Modal.Footer>\r\n              <Button variant=\"secondary\" onClick={() => setModal(false)}>Close</Button>\r\n              <button type=\"submit\" className=\"btn btn-secondary ms-2\" >Send</button>\r\n            </Modal.Footer>\r\n          </form>\r\n        </Modal.Body>\r\n\r\n      </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AdminNewsletter;","import {\r\n  ACTION_USER_ADD,\r\n  ACTION_USER_LIST,\r\n  ACTION_USER_LIST_FAIL,\r\n  ACTION_USER_SET_CURRENT,\r\n  ACTION_USER_UPDATE\r\n} from '../actionTypes/user'\r\nimport { actionAuthUpdateCard } from './auth'\r\n\r\nimport { callGet, callPost, } from '../../services/axios'\r\nimport { Notification } from 'element-react'\r\n\r\nconst token = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user'))['accessToken'] : null\r\n\r\nexport const actionUserCreate = (tokenData) => (dispatch) => {\r\n  callPost('/api/admin/user', tokenData, token)\r\n    .then((response) => {\r\n      Notification.success({\r\n        title: 'Success',\r\n        message: 'House Properties Submit Success!',\r\n        type: 'success',\r\n      })\r\n      dispatch({\r\n        type: ACTION_USER_ADD,\r\n        payload: tokenData,\r\n      })\r\n    }).catch(err => {\r\n      console.log(err);\r\n      Notification.error({\r\n        title: 'Failed',\r\n        message: 'Please try again.',\r\n        type: 'Warning',\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionUserList = (count) => (dispatch) => {\r\n  return callGet(`/api/user?count=${count}`)\r\n    .then(function (response) {\r\n      let result = response.data\r\n      dispatch({\r\n        type: ACTION_USER_LIST,\r\n        payload: result,\r\n      })\r\n    })\r\n    .catch((error) => {\r\n      dispatch({\r\n        type: ACTION_USER_LIST_FAIL,\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionUserUpdate = (userData) => dispatch => {\r\n  callPost('/api/admin/user/update', userData, token)\r\n    .then((response) => {\r\n      console.log('[res]', response);\r\n      Notification.success({\r\n        title: 'Success',\r\n        message: response.data.message,\r\n        type: 'success',\r\n      })\r\n      dispatch({\r\n        type: ACTION_USER_UPDATE,\r\n        payload: userData,\r\n      })\r\n    }).catch(err => {\r\n      console.log(err);\r\n      Notification.error({\r\n        title: 'Failed',\r\n        message: 'Transaction update failed. Please try again.',\r\n        type: 'Warning',\r\n      })\r\n    }\r\n  )\r\n}\r\n\r\nexport const actionUserUpdateCard = (cardData) => dispatch => {\r\n  callPost('/api/admin/user/update/card', cardData, token)\r\n    .then((response) => {\r\n      console.log('[res]', response);\r\n      Notification.success({\r\n        title: 'Success',\r\n        message: response.data.message,\r\n        type: 'success',\r\n      })\r\n      dispatch(actionAuthUpdateCard(cardData.card));\r\n    }).catch(err => {\r\n      console.log(err);\r\n      Notification.error({\r\n        title: 'Failed',\r\n        message: 'Transaction update failed. Please try again.',\r\n        type: 'Warning',\r\n      })\r\n    }\r\n  )\r\n} \r\n\r\nexport const actionUserSetCurrent = (user) => dispatch => {\r\n  dispatch({\r\n    type:ACTION_USER_SET_CURRENT,\r\n    payload: user\r\n  })\r\n}","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}"],"sourceRoot":""}