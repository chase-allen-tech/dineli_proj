(this.webpackJsonpdineli=this.webpackJsonpdineli||[]).push([[21],{1087:function(e,t,n){"use strict";n.r(t);var a=n(111),s=n(443),i=n.n(s),r=n(495),o=n(454),c=n(63),l=n(64),d=n(115),u=n(67),h=n(66),p=n(1),b=n.n(p),m=n(107),g=n(110),j=n.n(g),y=n(435),f=n(758),x=n(109),O=n(767),v=n.n(O),C=n(420),S=n(482),N=n(770),I=n.n(N),k=n(419),R=n(771),P=n.n(R),T=n(522),A=n(9),w={firstname:"",lastname:"",email:"",phone:"",country:"",street:"",city:"",postCode:"",isGift:"",description:"",payCard:"1",cardNumber:"",expiration:"",securityCode:"",isAgree:"",walletAddress:""},D={actionPropertyGet:C.b,actionOrderCreate:S.a},L=Object(x.b)((function(e){return{credentialData:e.credential.credentialData}}),D)(function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={form:w,rules:{firstname:[{required:!0,message:"Please input first name",trigger:"blur"}],lastname:[{required:!0,message:"Please input last name",trigger:"blur"}],email:[{required:!0,message:"Please input email",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:"blur,change"}],phone:[{required:!0,message:"Please input phone",trigger:"blur"}],country:[{required:!0,message:"Please input country",trigger:"blur"}],street:[{required:!0,message:"Please input street",trigger:"blur"}],city:[{required:!0,message:"Please input Town/City",trigger:"change"}],isAgree:[{required:!0,message:"This field is required",trigger:"change"}]},countryList:[],productItems:[],totalPrice:0,coinbaseId:null,hellosignId:null},a.coinbaseRef=b.a.createRef(),a.onPaypalSuccess.bind(Object(d.a)(a)),a.onSaveOrder.bind(Object(d.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t=this,n=JSON.parse(localStorage.getItem("user"));n&&n.walletAddress||m.Notification.error({title:"Wallet Required",message:"Please check wallet in account page!",type:"Warning"});var a=JSON.parse(localStorage.getItem("cartProducts"));if(a&&a.length){var s,c=[],l=0,d=Object(o.a)(a);try{for(d.s();!(s=d.n()).done;){var u=s.value;c.push({identifier:u.address1,subtotal:Object(T.b)(u.tokenValue,Number(u.tokenQuantity)).toFixed(2)}),l+=Object(T.b)(u.tokenValue,Number(u.tokenQuantity))}}catch(b){d.e(b)}finally{d.f()}this.setState({productItems:c,totalPrice:l});var h={name:"Token Purchase - "+new Date,description:"Token purchase with coinbase",local_price:{amount:l,currency:"USD"},pricing_type:"fixed_price",requested_info:["email"]};fetch("https://api.commerce.coinbase.com/checkouts",{method:"POST",headers:{"Content-Type":"application/json","X-CC-Api-Key":null===(e=this.props.credentialData[0])||void 0===e?void 0:e.coinbaseApiKey,"X-CC-Version":"2018-03-22"},body:JSON.stringify(h)}).then(function(){var e=Object(r.a)(i.a.mark((function e(n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:a=e.sent,console.log("[cionbase data]",a),t.setState({coinbaseId:a.data.id});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("[coinbase error]",e)}));var p=v()().getData();p=p.map((function(e){return e.label})),this.setState({countryList:p})}}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.refs.form.validate((function(e){"1"===t.state.form.payCard&&t.coinbaseRef.handleButtonClick()}))}},{key:"handleReset",value:function(e){e.preventDefault(),this.refs.form.resetFields()}},{key:"onChange",value:function(e,t){this.setState({form:Object.assign({},this.state.form,Object(a.a)({},e,t))})}},{key:"onChangePaycard",value:function(e){this.setState({form:Object.assign({},this.state.form,{payCard:e})})}},{key:"onPaypalSuccess",value:function(){var e=Object(r.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.Notification.success({title:"Payment Success by "+t.payer.name.given_name,message:"Order id: "+n.orderID,type:"success",duration:5e3}),this.onSaveOrder("paypal");case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onCryptoSuccess",value:function(){m.Notification.success({title:"Payment Success",message:"Crypto payment success",type:"success",duration:5e3}),this.onSaveOrder("coinbase")}},{key:"onSaveOrder",value:function(e){console.log("[saving order...]");var t=JSON.parse(localStorage.getItem("user"));console.log(t,t.walletAddress);var n,a=JSON.parse(localStorage.getItem("cartProducts")),s=0,i=[],r=Object(o.a)(a);try{for(r.s();!(n=r.n()).done;){var c=n.value;s+=parseFloat(c.tokenQuantity),i.push({tokenAddress:c.tokenAddress,tokenQuantity:c.tokenQuantity,toAddress:t.walletAddress})}}catch(d){r.e(d)}finally{r.f()}var l={userId:t.id,status:"pending",totalPrice:this.state.totalPrice,count:s,paymentMethod:e,details:JSON.stringify(i),signatureId:this.state.hellosignId};this.props.actionOrderCreate(l),localStorage.removeItem("cartProducts"),this.props.history.push("/marketplace")}},{key:"onHelloSign",value:function(){var e=Object(r.a)(i.a.mark((function e(){var t,n,a,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w=Object.assign({},this.state.form),n=new P.a({clientId:null===(t=this.props.credentialData[0])||void 0===t?void 0:t.hellosignClientId}),(a=JSON.parse(localStorage.getItem("user")))&&a.walletAddress){e.next=6;break}return m.Notification.error({title:"Wallet Required",message:"Please add wallet in account page",type:"Warning"}),e.abrupt("return");case 6:Object(k.b)("/api/hellosign",{email:a.email,name:a.username,order:1}).then((function(e){console.log("[res]",e),e.data.success&&(n.open(e.data.signUrl),n.once("sign",(function(e){console.log("[signed]",e.signatureId),s.setState({hellosignId:e.signatureId})})))})).catch((function(e){console.log(e)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return Object(A.jsx)("div",{style:{margin:"4% 12% 4% 12%"},children:Object(A.jsx)(j.a,{bottom:!0,delay:200,children:Object(A.jsx)(m.Form,{ref:"form",model:this.state.form,rules:this.state.rules,labelWidth:"100",labelPosition:"top",children:Object(A.jsxs)(m.Layout.Row,{children:[Object(A.jsx)(m.Layout.Col,{sm:"24",md:12,children:Object(A.jsx)("div",{className:"grid-content",children:Object(A.jsxs)("div",{className:"register-ruleForm d-font-bold",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:[Object(A.jsx)(m.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 15px 0px"},children:Object(A.jsx)(m.Layout.Col,{span:"24",children:Object(A.jsx)("div",{className:"grid-content d-content-highlight",style:{borderRadius:"10px 10px 1px 1px"},children:Object(A.jsx)("div",{className:"d-font-bold d-black",style:{display:"inline",marginLeft:10},children:"Billing Details"})})})}),Object(A.jsxs)(m.Layout.Row,{children:[Object(A.jsx)(m.Layout.Col,{span:"12",children:Object(A.jsx)("div",{className:"grid-content bg-purple",children:Object(A.jsx)(m.Form.Item,{label:"FIRST NAME",prop:"firstname",style:{margin:15},children:Object(A.jsx)(m.Input,{value:this.state.form.firstname,onChange:this.onChange.bind(this,"firstname")})})})}),Object(A.jsx)(m.Layout.Col,{span:"12",children:Object(A.jsx)("div",{className:"grid-content bg-purple-light",children:Object(A.jsx)(m.Form.Item,{label:"LAST NAME",prop:"lastname",style:{margin:15},children:Object(A.jsx)(m.Input,{value:this.state.form.lastname,onChange:this.onChange.bind(this,"lastname")})})})})]}),Object(A.jsx)(m.Form.Item,{label:"EMAIL ADDRESS",prop:"email",style:{margin:15},children:Object(A.jsx)(m.Input,{value:this.state.form.email,onChange:this.onChange.bind(this,"email")})}),Object(A.jsx)(m.Form.Item,{label:"PHONE",prop:"phone",style:{margin:15},children:Object(A.jsx)(m.Input,{value:this.state.form.phone,onChange:this.onChange.bind(this,"phone")})}),Object(A.jsx)(m.Form.Item,{label:"Country",prop:"country",style:{margin:15},children:Object(A.jsx)(m.Select,{value:this.state.form.country,placeholder:"country name",onChange:this.onChange.bind(this,"country"),style:{width:"100%"},children:this.state.countryList.map((function(e,t){return Object(A.jsx)(m.Select.Option,{label:e,value:e},t)}))})}),Object(A.jsx)(m.Form.Item,{label:"STREET ADDRESS",prop:"street",style:{margin:15},children:Object(A.jsx)(m.Input,{value:this.state.form.street,onChange:this.onChange.bind(this,"street")})}),Object(A.jsx)(m.Form.Item,{label:"TOWN/CITY",prop:"city",style:{margin:15},children:Object(A.jsx)(m.Input,{value:this.state.form.city,onChange:this.onChange.bind(this,"city")})}),Object(A.jsx)(m.Form.Item,{label:"POST CODE/ZIP",prop:"postCode",style:{margin:15},children:Object(A.jsx)(m.Input,{value:this.state.form.postCode,onChange:this.onChange.bind(this,"postCode")})})]})})}),Object(A.jsxs)(m.Layout.Col,{sm:"24",md:12,children:[Object(A.jsx)("div",{className:"grid-content",children:Object(A.jsx)("div",{className:"register-ruleForm d-font-bold",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:Object(A.jsxs)(m.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 15px 0px"},children:[Object(A.jsx)(m.Layout.Col,{span:"24",children:Object(A.jsx)("div",{className:"grid-content d-content-highlight",style:{borderRadius:"10px 10px 1px 1px"},children:Object(A.jsx)("div",{className:"d-font-bold d-black",style:{display:"inline",marginLeft:10},children:"Additional Information"})})}),Object(A.jsx)(m.Layout.Col,{span:"24",children:Object(A.jsx)("div",{className:"grid-content",style:{borderRadius:"10px 10px 1px 1px",marginLeft:20,marginTop:20},children:Object(A.jsx)("div",{children:Object(A.jsx)(m.Checkbox.Group,{value:this.state.form.isGift,onChange:this.onChange.bind(this,"isGift"),children:Object(A.jsx)(m.Checkbox,{label:" \xa0 THIS ORDER IS A GIFT",name:"isGift"})})})})}),Object(A.jsx)(m.Layout.Col,{span:"24",children:Object(A.jsx)("div",{className:"grid-content",style:{borderRadius:"10px 10px 1px 1px"},children:Object(A.jsx)("div",{className:"d-font-bold d-white d-text-14",style:{display:"inline",marginLeft:20},children:"ORDER NOTES (OPTIONAL)"})})}),Object(A.jsx)(m.Layout.Col,{span:"24",children:Object(A.jsx)("div",{className:"grid-content",style:{borderRadius:"10px 10px 1px 1px"},children:Object(A.jsx)(m.Input,{type:"textarea",value:this.state.form.description,onChange:this.onChange.bind(this,"description"),style:{width:"95%",margin:"0px 20px 0px 20px"}})})})]})})}),Object(A.jsx)("div",{style:{padding:20},children:Object(A.jsx)(m.Button,{onClick:this.onHelloSign.bind(this),type:"success",className:"d-font-bold d-text-28 w-100",style:{background:"#03ffa4",color:"black",borderRadius:10},children:"Hello Sign"})})]}),Object(A.jsx)(m.Layout.Col,{span:24,children:Object(A.jsx)("div",{className:"grid-content",children:Object(A.jsx)("div",{className:"register-ruleForm d-font-bold",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:Object(A.jsxs)(m.Layout.Row,{style:{fontSize:25,margin:"-1px 0px 15px 0px"},children:[Object(A.jsx)(m.Layout.Col,{span:"24",children:Object(A.jsx)("div",{className:"grid-content d-content-highlight",style:{borderRadius:"10px 10px 1px 1px"},children:Object(A.jsx)("div",{className:"d-font-bold d-black",style:{display:"inline",marginLeft:10},children:"YOUR ORDER"})})}),Object(A.jsxs)(y.a,{striped:!0,hover:!0,variant:"dark",style:{margin:0,fontSize:15},className:"text-center",children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{className:"bg-secondary",children:"#"}),Object(A.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Product"}),Object(A.jsx)("th",{className:"bg-secondary",style:{minWidth:130},children:"Sub Total"})]})}),Object(A.jsxs)("tbody",{children:[this.state.productItems.map((function(e,t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:t+1}),Object(A.jsx)("td",{children:e.identifier}),Object(A.jsx)("td",{children:e.subtotal})]},t)})),Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{}),Object(A.jsx)("td",{children:"TOTAL"}),Object(A.jsxs)("td",{children:["$ ",this.state.totalPrice.toFixed(2)]})]})]})]})]})})})}),this.state.hellosignId&&Object(A.jsx)(m.Layout.Col,{span:24,style:{zIndex:100},children:Object(A.jsxs)("div",{className:"grid-content",style:{border:"2px solid #03ffa4",margin:20,borderRadius:10},children:[Object(A.jsxs)("div",{style:{margin:"2%"},children:[Object(A.jsx)(m.Radio,{value:"1",checked:"1"===this.state.form.payCard,onChange:this.onChangePaycard.bind(this),className:"d-font-bold d-white d-text-28",children:"\xa0\xa0PAY WITH CRYPTOCURRENCY"}),Object(A.jsx)("div",{className:"d-font-book d-text-28 d-highlight",children:"Pay with cryptocurrency. If you pay in USDC or DAI, you mush pay only on the ETHEREUM network!"}),Object(A.jsxs)("div",{className:"position-relative",children:[Object(A.jsx)("div",{className:"position-absolute",children:Object(A.jsx)(I.a,{ref:function(e){return t.coinbaseRef=e},checkoutId:this.state.coinbaseId,styled:!1,onChargeSuccess:function(){return alert("success")},onChargeFailure:function(){return console.log("Failure")}})}),Object(A.jsx)("div",{className:"position-absolute w-100",style:{height:50,backgroundColor:"black"}})]})]}),Object(A.jsx)("div",{style:{margin:"2%"},children:Object(A.jsx)(m.Radio,{value:"2",checked:"2"===this.state.form.payCard,onChange:this.onChangePaycard.bind(this),className:"d-font-bold d-white d-text-28",children:"\xa0 \xa0PAY WITH PAYPAL"})}),Object(A.jsxs)("div",{className:"d-font-book d-text-30 d-white",style:{margin:"2%"},children:[Object(A.jsx)("div",{children:"Your proposal data will be used to process your order, support your experience throughout this website, and for other purposes described in our \xa0"}),Object(A.jsx)("button",{type:"button",className:"d-highlight",children:"Privacy Policy"})]}),Object(A.jsx)("div",{className:"d-flex",children:Object(A.jsx)(m.Form.Item,{label:"",prop:"",className:"ms-auto me-4",children:Object(A.jsx)(m.Checkbox,{checked:this.state.form.isAgree,onChange:this.onChange.bind(this,"isAgree"),label:" \xa0 I HAVE READ AND AGREE TO THE WEBSITE TEAMS AND CONDITIONS",name:"isAgree",className:"d-font-bold d-white",style:{fontSize:"2em"}})})}),Object(A.jsx)("div",{className:"block",style:{marginTop:30},children:Object(A.jsxs)("div",{className:"wrapper position-relative",style:{textAlign:"right",margin:"3% 3% 3% 0"},children:[Object(A.jsx)(m.Button,{onClick:this.handleSubmit.bind(this),type:"success",className:"d-font-bold d-text-28 w-50 text-dark",style:{background:"#03ffa4",borderRadius:10},disabled:!this.state.form.isAgree,children:"PLACE ORDER"}),"2"===this.state.form.payCard&&this.state.form.isAgree&&Object(A.jsx)("div",{className:"position-absolute top-0 end-0 w-50 opacity-0",children:Object(A.jsx)(f.PayPalButton,{amount:this.state.totalPrice,onSuccess:function(e,n){t.onPaypalSuccess(e,n)},options:{clientId:null===(e=this.props.credentialData[0])||void 0===e?void 0:e.paypalAppClientId}})})]})})]})})]})})})})}}]),n}(p.Component));t.default=L},420:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(35),s=n(419),i=n(107),r=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,o=function(e){return function(t){r=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,Object(s.d)("/api/admin/property",e,r).then((function(n){i.Notification.success({title:"Success",message:"House Properties Submit Success!",type:"success"}),t({type:a.a,payload:e})})).catch((function(e){console.log(e),i.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},c=function(e){return function(t){r=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,console.log("token",r),Object(s.d)("/api/admin/property/update",e,r).then((function(n){i.Notification.success({title:"Success",message:"House Properties Update Success!",type:"success"}),t({type:a.f,payload:e})})).catch((function(e){console.log(e),i.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},l=function(e){return function(t){return Object(s.c)("/api/property?count=".concat(e)).then((function(e){for(var n=e.data,s=0;s<n.length;s++)n[s].monthlyNetRent=n[s].monthlyGrossRent-n[s].monthlyCosts,n[s].yearlyNetRent=12*(n[s].monthlyGrossRent-n[s].monthlyCosts),n[s].fee=n[s].generatedToken*n[s].tokenValue*10/100,n[s].totalInvestment=n[s].generatedToken*n[s].tokenValue+n[s].initMaintainanceReserve+n[s].fee,n[s].expectedYield=12*(n[s].monthlyGrossRent-n[s].monthlyCosts)/(n[s].generatedToken*n[s].tokenValue)*100,n[s].imageData=n[s].imageData.split(",");t({type:a.d,payload:n})})).catch((function(e){t({type:a.e})}))}},d=function(e){return function(t){return Object(s.c)("/api/property/id?ID=".concat(e)).then((function(e){var n=e.data;return n.monthlyGrossRent=n.monthlyGrossRent,n.monthlyNetRent=n.monthlyGrossRent-n.monthlyCosts,n.yearlyNetRent=12*(n.monthlyGrossRent-n.monthlyCosts),n.fee=n.generatedToken*n.tokenValue*10/100,n.totalInvestment=n.generatedToken*n.tokenValue+n.initMaintainanceReserve+n.fee,n.expectedYield=12*(n.monthlyGrossRent-n.monthlyCosts)/parseFloat(n.generatedToken*n.tokenValue)*100,n.imageData=n.imageData.split(","),t({type:a.b,payload:n})})).catch((function(e){return t({type:a.c})}))}}},482:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return u}));var a=n(7),s=n(42),i=n(419),r=n(107),o=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).accessToken:null,c=function(e){return function(t){Object(i.d)("/api/admin/order",e,o).then((function(n){r.Notification.success({title:"Success",message:"Order Submit Success!",type:"success"}),t({type:s.a,payload:e}),localStorage.removeItem("cartProducts")})).catch((function(e){console.log(e),r.Notification.error({title:"Failed",message:"Please try again.",type:"Warning"})}))}},l=function(e){return function(t){return Object(i.c)("/api/order?count=".concat(e)).then((function(e){var n=e.data;t({type:s.d,payload:n})})).catch((function(e){t({type:s.e})}))}},d=function(e){return function(t){return Object(i.c)("/api/order/uid?ID=".concat(e)).then((function(e){var n=e.data;return n=n.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{details:JSON.parse(e.details)})})),t({type:s.f,payload:n})})).catch((function(e){return t({type:s.c})}))}},u=function(e){return function(t){Object(i.d)("/api/admin/order/update",e,o).then((function(e){})).catch((function(e){console.log(e),r.Notification.error({title:"Failed",message:"Transaction update failed. Please try again.",type:"Warning"})}))}}},522:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var a=function(e,t){return parseFloat(e)*parseFloat(t)*.1},s=function(e,t){return parseFloat(e)*parseFloat(t)*1.1}}}]);
//# sourceMappingURL=21.7d6b1d99.chunk.js.map